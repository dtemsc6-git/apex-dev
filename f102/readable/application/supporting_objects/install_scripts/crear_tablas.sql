  CREATE TABLE "AUDIT_DETAIL" 
   (	"AUDIT_DETAIL_ID" NUMBER, 
	"AUDIT_ID" NUMBER, 
	"TABLE_NAME" VARCHAR2(30), 
	"COLUMN_NAME" VARCHAR2(30), 
	"OLD_VALUE" VARCHAR2(4000), 
	"NEW_VALUE" VARCHAR2(4000), 
	"PK_COLUMN" VARCHAR2(30), 
	"PK_VALUE" VARCHAR2(4000), 
	 PRIMARY KEY ("AUDIT_DETAIL_ID")
  USING INDEX  ENABLE
   ) ;

  CREATE TABLE "AUDIT_MASTER" 
   (	"AUDIT_ID" NUMBER, 
	"DB_USER" VARCHAR2(30), 
	"APP_USER" VARCHAR2(30), 
	"APEX_USER" VARCHAR2(30), 
	"APP_ID" NUMBER, 
	"PAGE_ID" NUMBER, 
	"IP_ADDRESS" VARCHAR2(50), 
	"TIMESTAMP" TIMESTAMP (6) DEFAULT SYSTIMESTAMP, 
	"ACTION_TYPE" VARCHAR2(10), 
	 PRIMARY KEY ("AUDIT_ID")
  USING INDEX  ENABLE
   ) ;

  CREATE TABLE "SGT_CIUDAD" 
   (	"ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"NOMBRE" VARCHAR2(100) NOT NULL ENABLE, 
	"DEPTO_ID" NUMBER, 
	 PRIMARY KEY ("ID")
  USING INDEX  ENABLE
   ) ;

  CREATE TABLE "SGT_CONEXIONES_ENLACE_WAN" 
   (	"ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"ENLACE_TRAMO_ID" NUMBER NOT NULL ENABLE, 
	"ENLACE_WAN_ID" NUMBER NOT NULL ENABLE, 
	"SECUENCIA" NUMBER NOT NULL ENABLE, 
	"CREADO_POR" VARCHAR2(255), 
	"CREADO_EL" TIMESTAMP (6), 
	"MODIFICADO_POR" VARCHAR2(255), 
	"MODIFICADO_EL" TIMESTAMP (6), 
	 PRIMARY KEY ("ID")
  USING INDEX  ENABLE
   ) ;

  CREATE TABLE "SGT_CONEXIONES_SERVICIO" 
   (	"ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"SERVICIO_ID" NUMBER, 
	"ENLACE_TRAMO_ID" NUMBER, 
	"SEQ" NUMBER, 
	"CREADO_POR" VARCHAR2(255), 
	"CREADO_EL" TIMESTAMP (6), 
	"MODIFICADO_POR" VARCHAR2(255), 
	"MODIFICADO_EL" TIMESTAMP (6), 
	 PRIMARY KEY ("ID")
  USING INDEX  ENABLE
   ) ;

  CREATE TABLE "SGT_DEPTO" 
   (	"ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"NOMBRE" VARCHAR2(100) NOT NULL ENABLE, 
	"CAPITAL" VARCHAR2(100) NOT NULL ENABLE, 
	 PRIMARY KEY ("ID")
  USING INDEX  ENABLE
   ) ;

  CREATE TABLE "SGT_ENLACES_FO" 
   (	"ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"NOMBRE" VARCHAR2(255), 
	"SITIO_ID_A" NUMBER, 
	"EQUIPO_ID_A" NUMBER, 
	"SITIO_ID_B" NUMBER, 
	"EQUIPO_ID_B" NUMBER, 
	"CERTIFICACIÓN" NUMBER, 
	"UNIDAD_MEDIDA" VARCHAR2(3), 
	"ABS_LONGITUD" NUMBER, 
	"CANTIDAD_DE_PELOS" NUMBER, 
	"TIPO_DE_FO" VARCHAR2(50), 
	"TIPO" VARCHAR2(50), 
	"LT" VARCHAR2(50), 
	"CONECTOR" VARCHAR2(50), 
	"ESTADO" VARCHAR2(50), 
	"COMENTARIOS" VARCHAR2(4000), 
	"PROYECTO_DE_IMPLEMENTACIÓN" VARCHAR2(255), 
	"FECHA_IMPLEMENTACIÓN" TIMESTAMP (9), 
	"UNIDAD_ENCARGADA_ACTUAL" VARCHAR2(255), 
	"CREADO_POR" VARCHAR2(255), 
	"CREADO_EL" TIMESTAMP (9), 
	"ACTUALIZADO_POR" VARCHAR2(255), 
	"ACTUALIZADO_EL" TIMESTAMP (9), 
	"TIPO_CABLE" VARCHAR2(255), 
	"TIPO_TENDIDO" VARCHAR2(25), 
	"PUERTOS_LADO_A" VARCHAR2(255), 
	"PUERTOS_LADO_B" VARCHAR2(255), 
	 PRIMARY KEY ("ID")
  USING INDEX  ENABLE
   ) ;

  CREATE TABLE "SGT_ENLACES_TRAMOS" 
   (	"ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"NOMBRE" VARCHAR2(255), 
	"LADO_ID" NUMBER, 
	"EQUIPO_A_ID" NUMBER, 
	"INTERFAZ_A_ID" NUMBER, 
	"EQUIPO_B_ID" NUMBER, 
	"INTERFAZ_B_ID" NUMBER, 
	"CREADO_POR" VARCHAR2(50), 
	"CREADO_EL" TIMESTAMP (6), 
	"ACTUALIZADO_POR" VARCHAR2(50), 
	"ACTUALIZADO_EL" TIMESTAMP (6), 
	"TIPO_CONEXION" VARCHAR2(100), 
	"ENLACE_ID" VARCHAR2(100), 
	 PRIMARY KEY ("ID")
  USING INDEX  ENABLE
   ) ;

  CREATE TABLE "SGT_ENLACES_WAN" 
   (	"ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"NOMBRE" VARCHAR2(255) NOT NULL ENABLE, 
	"GRUPO_RED" VARCHAR2(1000) NOT NULL ENABLE, 
	"CREADO_POR" VARCHAR2(255), 
	"CREADO_EL" TIMESTAMP (6), 
	"ACTUALIZADO_POR" VARCHAR2(255), 
	"ACTUALIZADO_EL" TIMESTAMP (6), 
	 PRIMARY KEY ("ID")
  USING INDEX  ENABLE
   ) ;

  CREATE TABLE "SGT_ENLACES_WAN_SERVICIO" 
   (	"ID" NUMBER(*,0), 
	"SERVICIO_ID" NUMBER(*,0), 
	"ENLACE_ID" NUMBER(*,0), 
	"SEQ" NUMBER(*,0), 
	"CREADO_POR" VARCHAR2(255), 
	"CREADO_EL" TIMESTAMP (6), 
	"MODIFICADO_POR" VARCHAR2(255), 
	"MODIFICADO_EL" TIMESTAMP (6), 
	 PRIMARY KEY ("ID")
  USING INDEX  ENABLE
   ) ;

  CREATE TABLE "SGT_ENLACE_LOGICO_TRAMO" 
   (	"ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"ENLACE_LOGICO_ID" NUMBER, 
	"TRAMO_ID" NUMBER, 
	 PRIMARY KEY ("ID")
  USING INDEX  ENABLE
   ) ;

  CREATE TABLE "SGT_EQUIPOS" 
   (	"ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"UNIDAD_ENCARGADA" VARCHAR2(50), 
	"RACK_ID" NUMBER, 
	"U" NUMBER, 
	"TIPO_RED" VARCHAR2(50), 
	"NOMBRE" VARCHAR2(60), 
	"TIPO_EQUIPO_ID" NUMBER, 
	"SUB_TIPO_EQUIPO" VARCHAR2(50), 
	"MARCA" VARCHAR2(50), 
	"MODELO" VARCHAR2(255), 
	"ESTADO" VARCHAR2(50), 
	"OBSERVACIONES" VARCHAR2(4000), 
	"NI_ANDE" VARCHAR2(50), 
	"SERIAL_NUMBER" VARCHAR2(50), 
	"VERSION_HARDWARE" VARCHAR2(50), 
	"VERSION_SOFTWARE" VARCHAR2(50), 
	"VERSION_PATCH" VARCHAR2(50), 
	"IP_GESTION" VARCHAR2(50), 
	"ALIMENTACION1_ID" VARCHAR2(50), 
	"ALIMENTACION2_ID" VARCHAR2(255), 
	"PROYECTO_ID" VARCHAR2(50), 
	"FECHA_IMPLE" DATE, 
	"ALTURA_U" NUMBER, 
	"POSICION" CHAR(20), 
	"SITIO_ID" NUMBER, 
	"CREADO_POR" VARCHAR2(255), 
	"CREADO_EL" TIMESTAMP (6), 
	"ACTUALIZADO_POR" VARCHAR2(255), 
	"ACTUALIZADO_EL" TIMESTAMP (6), 
	 PRIMARY KEY ("ID")
  USING INDEX  ENABLE, 
	 CONSTRAINT "SGT_EQUIPOS_CON" UNIQUE ("NOMBRE") DISABLE
   ) ;

  CREATE TABLE "SGT_INTERFACES" 
   (	"ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"EQUIPO_ID" NUMBER, 
	"NOMBRE" VARCHAR2(255 CHAR), 
	"ETIQUETA" VARCHAR2(255 CHAR), 
	"ESTADO" VARCHAR2(255 CHAR), 
	"MODO" VARCHAR2(255 CHAR), 
	"DUPLEX" VARCHAR2(255 CHAR), 
	"TIPO_INTERFACE_ID" NUMBER, 
	"TX_EN_DBM" VARCHAR2(10 CHAR), 
	"RX_EN_DBM" VARCHAR2(10 CHAR), 
	"MAC_ADDRESS" VARCHAR2(25 CHAR), 
	"NUMERO_SERIE" VARCHAR2(255 CHAR), 
	"HW_VERSION" VARCHAR2(100 CHAR), 
	"SW_VERSION" VARCHAR2(100 CHAR), 
	"CREADO_EL" TIMESTAMP (6), 
	"ACTUALIZADO_EL" TIMESTAMP (6), 
	"ACTUALIZADO_POR" VARCHAR2(255), 
	"CREADO_POR" VARCHAR2(255), 
	 CONSTRAINT "SGT_INTERFACES_ESTADO_CK" CHECK (estado in ('up','down','administratively down')) ENABLE, 
	 CONSTRAINT "SGT_INTERFACES_MODO_CK" CHECK (modo in ('access','trunk','tagged','tagged-all','hybrid','q-in-q')) ENABLE, 
	 CONSTRAINT "SGT_INTERFACES_DUPLEX_CK" CHECK (duplex in ('auto','half','full')) ENABLE, 
	 PRIMARY KEY ("ID")
  USING INDEX  ENABLE
   ) ;

  CREATE TABLE "SGT_RACKS" 
   (	"ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"SALA_ID" NUMBER NOT NULL ENABLE, 
	"NOMBRE" VARCHAR2(255), 
	"DETALLE" VARCHAR2(255), 
	"UNIDAD_ENCARGADA" VARCHAR2(50), 
	"MARCA" VARCHAR2(255), 
	"MODELO" VARCHAR2(255), 
	"DIMENSIONES" VARCHAR2(255), 
	"ALTURA_U" VARCHAR2(50), 
	"CREADO_POR" VARCHAR2(255), 
	"CREADO_EL" TIMESTAMP (6), 
	"MODIFICADO_POR" VARCHAR2(255), 
	"MODIFICADO_EL" TIMESTAMP (6), 
	 PRIMARY KEY ("ID")
  USING INDEX  ENABLE
   ) ;

  CREATE TABLE "SGT_SALAS" 
   (	"ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"SITIO_ID" NUMBER NOT NULL ENABLE, 
	"SIGLAS" VARCHAR2(50), 
	"NOMBRE" VARCHAR2(255), 
	"CREADO_POR" VARCHAR2(255), 
	"CREADO_EL" TIMESTAMP (6), 
	"MODIFICADO_POR" VARCHAR2(255), 
	"MODIFICADO_EL" TIMESTAMP (6), 
	 PRIMARY KEY ("ID")
  USING INDEX  ENABLE, 
	 CONSTRAINT "SITIO_SIGLA_UNICOS" UNIQUE ("SITIO_ID", "SIGLAS")
  USING INDEX  ENABLE
   ) ;

  CREATE TABLE "SGT_SERVICIOS" 
   (	"ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"NOMBRE" VARCHAR2(255), 
	"NIVEL_DE_PRIORIDAD" NUMBER, 
	"DESCRIPCION" VARCHAR2(50), 
	"CREADO_POR" VARCHAR2(50), 
	"CREADO_EL" DATE, 
	"ACTUALIZADO_POR" VARCHAR2(50), 
	"ACTUALIZADO_EL" DATE, 
	 PRIMARY KEY ("ID")
  USING INDEX  ENABLE
   ) ;

  CREATE TABLE "SGT_SITIOS" 
   (	"ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"SIGLAS" VARCHAR2(50) NOT NULL ENABLE, 
	"NOMBRE" VARCHAR2(255) NOT NULL ENABLE, 
	"TIPO_DE_SITIO" VARCHAR2(50) NOT NULL ENABLE, 
	"PROPIETARIO" VARCHAR2(50) NOT NULL ENABLE, 
	"ZONA_ID" NUMBER, 
	"CIUDAD_ID" NUMBER, 
	"LATITUD" VARCHAR2(50), 
	"LONGITUD" VARCHAR2(50), 
	"UBICACIÓN" VARCHAR2(255), 
	"OBSERVACION" VARCHAR2(255), 
	"CREADO_POR" VARCHAR2(255), 
	"CREADO_EL" TIMESTAMP (6), 
	"MODIFICADO_POR" VARCHAR2(255), 
	"MODIFICADO_EL" TIMESTAMP (6), 
	 PRIMARY KEY ("ID")
  USING INDEX  ENABLE, 
	 CONSTRAINT "SGT_SITIOS_SIGLAS_UNIK" UNIQUE ("SIGLAS")
  USING INDEX  ENABLE
   ) ;

  CREATE TABLE "SGT_SITIOS_ENLACE_WAN" 
   (	"ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"SITIO_ID" NUMBER, 
	"ENLACE_WAN_ID" NUMBER, 
	"SEQ" NUMBER, 
	"CREADO_POR" VARCHAR2(255 CHAR), 
	"CREADO_EL" TIMESTAMP (6), 
	"MODIFICADO_POR" VARCHAR2(255 CHAR), 
	"MODIFICADO_EL" TIMESTAMP (6), 
	 CONSTRAINT "SGT_SITIOS_ENLACE_WAN_ID_PK" PRIMARY KEY ("ID")
  USING INDEX  ENABLE
   ) ;

  CREATE TABLE "SGT_SITIOS_SERVICIO" 
   (	"ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"SITIO_ID" NUMBER, 
	"SERVICIO_ID" NUMBER, 
	"SEQ" NUMBER, 
	"CREADO_POR" VARCHAR2(255 CHAR), 
	"CREADO_EL" TIMESTAMP (6), 
	"MODIFICADO_POR" VARCHAR2(255 CHAR), 
	"MODIFICADO_EL" TIMESTAMP (6), 
	 CONSTRAINT "SGT_SITIOS_SERVICIO_ID_PK" PRIMARY KEY ("ID")
  USING INDEX  ENABLE
   ) ;

  CREATE TABLE "SGT_TIPO_CABLE" 
   (	"ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"NOMBRE" VARCHAR2(100 CHAR), 
	"MOSTRAR" VARCHAR2(255 CHAR), 
	"GRUPO_CABLES" VARCHAR2(100 CHAR), 
	"COMENTARIOS" VARCHAR2(1000 CHAR), 
	 PRIMARY KEY ("ID")
  USING INDEX  ENABLE
   ) ;

  CREATE TABLE "SGT_TIPO_EQUIPOS" 
   (	"ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"NOMBRE" VARCHAR2(50), 
	"DESCRIPCION" VARCHAR2(4000), 
	"GRUPO_EQUIPO" VARCHAR2(255), 
	"SIGLAS" VARCHAR2(4), 
	 PRIMARY KEY ("ID")
  USING INDEX  ENABLE, 
	 CONSTRAINT "SIGLAS_UNICA" UNIQUE ("SIGLAS")
  USING INDEX  ENABLE
   ) ;

  CREATE TABLE "SGT_TIPO_INTERFAZ" 
   (	"ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"NOMBRE" VARCHAR2(64 CHAR), 
	"VALOR" VARCHAR2(255 CHAR), 
	"DESCRIPCION" VARCHAR2(1000 CHAR), 
	 PRIMARY KEY ("ID")
  USING INDEX  ENABLE
   ) ;

  CREATE TABLE "SGT_ZONAS" 
   (	"ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"NOMBRE" VARCHAR2(50), 
	"PARENT_ID" NUMBER, 
	"DESCRIPCION" VARCHAR2(4000), 
	 CONSTRAINT "CHK_IS_NOT_NULL_NOMBRE" CHECK ( "NOMBRE" IS NOT NULL ) ENABLE, 
	 PRIMARY KEY ("ID")
  USING INDEX  ENABLE, 
	 CONSTRAINT "SGT_ZONAS_CHK_NOMBRE" UNIQUE ("NOMBRE")
  USING INDEX  ENABLE
   ) ;

  ALTER TABLE "AUDIT_DETAIL" ADD FOREIGN KEY ("AUDIT_ID")
	  REFERENCES "AUDIT_MASTER" ("AUDIT_ID") ENABLE;

  CREATE INDEX "IDX_AUDIT_DETAIL_MASTER" ON "AUDIT_DETAIL" ("AUDIT_ID") 
  ;

  CREATE INDEX "IDX_AUDIT_DETAIL_TABLE" ON "AUDIT_DETAIL" ("TABLE_NAME") 
  ;

  CREATE INDEX "IDX_AUDIT_MASTER_DATE" ON "AUDIT_MASTER" ("TIMESTAMP") 
  ;

  CREATE INDEX "IDX_AUDIT_MASTER_USER" ON "AUDIT_MASTER" ("APP_USER") 
  ;

  ALTER TABLE "SGT_CIUDAD" ADD CONSTRAINT "FK_CIUDAD_DEPARTAMENTO" FOREIGN KEY ("DEPTO_ID")
	  REFERENCES "SGT_DEPTO" ("ID") ON DELETE CASCADE ENABLE;

  CREATE OR REPLACE EDITIONABLE TRIGGER "TRG_AUDIT_SGT_CIUDAD" 
    AFTER INSERT OR UPDATE OR DELETE ON SGT_CIUDAD  
    FOR EACH ROW  
DECLARE  
    v_audit_id NUMBER;  
    v_pk_value VARCHAR2(100);  
    v_action_type VARCHAR2(10);  
BEGIN  
  
    IF INSERTING THEN  
        v_action_type := 'INSERT';  
        v_pk_value := TO_CHAR(:NEW.ID);  
    ELSIF UPDATING THEN  
        v_action_type := 'UPDATE';  
        v_pk_value := TO_CHAR(:NEW.ID);  
    ELSIF DELETING THEN  
        v_action_type := 'DELETE';  
        v_pk_value := TO_CHAR(:OLD.ID);  
    END IF;  
  
  
    v_audit_id := AUDIT_PKG.START_AUDIT(  
        p_table_name => 'SGT_CIUDAD',  
        p_action => v_action_type  
    );  
  
  
    IF INSERTING THEN  
  
        IF :NEW.NOMBRE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_CIUDAD', 'ID', v_pk_value, 'NOMBRE', NULL, :NEW.NOMBRE);  
        END IF;  
          
        IF :NEW.DEPTO_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_CIUDAD', 'ID', v_pk_value, 'DEPTO_ID', NULL, TO_CHAR(:NEW.DEPTO_ID));  
        END IF;  
  
    ELSIF UPDATING THEN  
  
        IF NVL(:OLD.NOMBRE, 'NULL') != NVL(:NEW.NOMBRE, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_CIUDAD', 'ID', v_pk_value, 'NOMBRE', :OLD.NOMBRE, :NEW.NOMBRE);  
        END IF;  
          
        IF NVL(:OLD.DEPTO_ID, -1) != NVL(:NEW.DEPTO_ID, -1) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_CIUDAD', 'ID', v_pk_value, 'DEPTO_ID', TO_CHAR(:OLD.DEPTO_ID), TO_CHAR(:NEW.DEPTO_ID));  
        END IF;  
  
    ELSIF DELETING THEN  
  
        IF :OLD.NOMBRE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_CIUDAD', 'ID', v_pk_value, 'NOMBRE', :OLD.NOMBRE, NULL);  
        END IF;  
          
        IF :OLD.DEPTO_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_CIUDAD', 'ID', v_pk_value, 'DEPTO_ID', TO_CHAR(:OLD.DEPTO_ID), NULL);  
        END IF;  
    END IF;  
  
EXCEPTION  
    WHEN OTHERS THEN  
          
        NULL;   
END TRG_AUDIT_SGT_CIUDAD;
/
ALTER TRIGGER "TRG_AUDIT_SGT_CIUDAD" ENABLE;

  ALTER TABLE "SGT_CONEXIONES_ENLACE_WAN" ADD CONSTRAINT "FK_CONEXIONES_ENLACE_TRAMO" FOREIGN KEY ("ENLACE_TRAMO_ID")
	  REFERENCES "SGT_ENLACES_TRAMOS" ("ID") ENABLE;
  ALTER TABLE "SGT_CONEXIONES_ENLACE_WAN" ADD CONSTRAINT "FK_CONEXIONES_ENLACE_WAN" FOREIGN KEY ("ENLACE_WAN_ID")
	  REFERENCES "SGT_ENLACES_WAN" ("ID") ENABLE;

  CREATE OR REPLACE EDITIONABLE TRIGGER "TRG_AUDIT_SGT_CONEXIONES_ENLACE_WAN" 
AFTER INSERT OR UPDATE OR DELETE ON SGT_CONEXIONES_ENLACE_WAN   
FOR EACH ROW   
DECLARE   
    v_action VARCHAR2(10);   
    v_audit_id NUMBER;   
BEGIN   
    -- Determinar tipo de operación   
    IF INSERTING THEN   
        v_action := 'INSERT';   
    ELSIF UPDATING THEN   
        v_action := 'UPDATE';   
    ELSIF DELETING THEN   
        v_action := 'DELETE';   
    END IF;   
       
    v_audit_id := AUDIT_PKG.START_AUDIT('SGT_CONEXIONES_ENLACE_WAN', v_action);   
       
    IF INSERTING THEN   
        -- Campos obligatorios   
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_CONEXIONES_ENLACE_WAN', 'ID', :NEW.ID, 'ENLACE_TRAMO_ID', NULL, TO_CHAR(:NEW.ENLACE_TRAMO_ID));   
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_CONEXIONES_ENLACE_WAN', 'ID', :NEW.ID, 'ENLACE_WAN_ID', NULL, TO_CHAR(:NEW.ENLACE_WAN_ID));   
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_CONEXIONES_ENLACE_WAN', 'ID', :NEW.ID, 'SECUENCIA', NULL, TO_CHAR(:NEW.SECUENCIA));   
       
    ELSIF UPDATING THEN   
        -- ENLACE_TRAMO_ID   
        IF :OLD.ENLACE_TRAMO_ID != :NEW.ENLACE_TRAMO_ID OR    
           (:OLD.ENLACE_TRAMO_ID IS NULL AND :NEW.ENLACE_TRAMO_ID IS NOT NULL) OR   
           (:OLD.ENLACE_TRAMO_ID IS NOT NULL AND :NEW.ENLACE_TRAMO_ID IS NULL) THEN   
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_CONEXIONES_ENLACE_WAN', 'ID', :NEW.ID, 'ENLACE_TRAMO_ID',    
                                 TO_CHAR(:OLD.ENLACE_TRAMO_ID), TO_CHAR(:NEW.ENLACE_TRAMO_ID));   
        END IF;   
           
        -- ENLACE_WAN_ID   
        IF :OLD.ENLACE_WAN_ID != :NEW.ENLACE_WAN_ID OR    
           (:OLD.ENLACE_WAN_ID IS NULL AND :NEW.ENLACE_WAN_ID IS NOT NULL) OR   
           (:OLD.ENLACE_WAN_ID IS NOT NULL AND :NEW.ENLACE_WAN_ID IS NULL) THEN   
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_CONEXIONES_ENLACE_WAN', 'ID', :NEW.ID, 'ENLACE_WAN_ID',    
                                 TO_CHAR(:OLD.ENLACE_WAN_ID), TO_CHAR(:NEW.ENLACE_WAN_ID));   
        END IF;   
           
        -- SECUENCIA   
        IF :OLD.SECUENCIA != :NEW.SECUENCIA OR    
           (:OLD.SECUENCIA IS NULL AND :NEW.SECUENCIA IS NOT NULL) OR   
           (:OLD.SECUENCIA IS NOT NULL AND :NEW.SECUENCIA IS NULL) THEN   
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_CONEXIONES_ENLACE_WAN', 'ID', :NEW.ID, 'SECUENCIA',    
                                 TO_CHAR(:OLD.SECUENCIA), TO_CHAR(:NEW.SECUENCIA));   
        END IF;   
       
    -- Para eliminaciones - registramos los valores que se están eliminando   
    ELSIF DELETING THEN   
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_CONEXIONES_ENLACE_WAN', 'ID', :OLD.ID, 'ENLACE_TRAMO_ID', TO_CHAR(:OLD.ENLACE_TRAMO_ID), NULL);   
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_CONEXIONES_ENLACE_WAN', 'ID', :OLD.ID, 'ENLACE_WAN_ID', TO_CHAR(:OLD.ENLACE_WAN_ID), NULL);   
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_CONEXIONES_ENLACE_WAN', 'ID', :OLD.ID, 'SECUENCIA', TO_CHAR(:OLD.SECUENCIA), NULL);   
    END IF;   
END;
/
ALTER TRIGGER "TRG_AUDIT_SGT_CONEXIONES_ENLACE_WAN" ENABLE;

  ALTER TABLE "SGT_CONEXIONES_SERVICIO" ADD FOREIGN KEY ("SERVICIO_ID")
	  REFERENCES "SGT_SERVICIOS" ("ID") ENABLE;
  ALTER TABLE "SGT_CONEXIONES_SERVICIO" ADD FOREIGN KEY ("ENLACE_TRAMO_ID")
	  REFERENCES "SGT_ENLACES_TRAMOS" ("ID") ENABLE;

  CREATE OR REPLACE EDITIONABLE TRIGGER "TRG_AUDIT_SGT_CONEXIONES_SERVICIO" 
AFTER INSERT OR UPDATE OR DELETE ON SGT_CONEXIONES_SERVICIO  
FOR EACH ROW  
DECLARE  
    v_audit_id  NUMBER;  
    v_pk_value  VARCHAR2(100);  
BEGIN  
    IF INSERTING THEN  
        v_audit_id := AUDIT_PKG.START_AUDIT('SGT_CONEXIONES_SERVICIO', 'INSERT');  
        v_pk_value := TO_CHAR(:NEW.ID);  
    AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_CONEXIONES_SERVICIO', 'ID', v_pk_value, 'ID', NULL, TO_CHAR(:NEW.ID));  
    AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_CONEXIONES_SERVICIO', 'ID', v_pk_value, 'SERVICIO_ID', NULL, TO_CHAR(:NEW.SERVICIO_ID));  
    AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_CONEXIONES_SERVICIO', 'ID', v_pk_value, 'ENLACE_TRAMO_ID', NULL, TO_CHAR(:NEW.ENLACE_TRAMO_ID));  
    AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_CONEXIONES_SERVICIO', 'ID', v_pk_value, 'SEQ', NULL, TO_CHAR(:NEW.SEQ));  
    ELSIF UPDATING THEN  
        v_audit_id := AUDIT_PKG.START_AUDIT('SGT_CONEXIONES_SERVICIO', 'UPDATE');  
        v_pk_value := TO_CHAR(:NEW.ID);  
        IF NVL(:OLD.ID, -1) != NVL(:NEW.ID, -1) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_CONEXIONES_SERVICIO', 'ID', v_pk_value, 'ID', TO_CHAR(:OLD.ID), TO_CHAR(:NEW.ID));  
        END IF;  
        IF NVL(:OLD.SERVICIO_ID, -1) != NVL(:NEW.SERVICIO_ID, -1) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_CONEXIONES_SERVICIO', 'ID', v_pk_value, 'SERVICIO_ID', TO_CHAR(:OLD.SERVICIO_ID), TO_CHAR(:NEW.SERVICIO_ID));  
        END IF;  
        IF NVL(:OLD.ENLACE_TRAMO_ID, -1) != NVL(:NEW.ENLACE_TRAMO_ID, -1) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_CONEXIONES_SERVICIO', 'ID', v_pk_value, 'ENLACE_TRAMO_ID', TO_CHAR(:OLD.ENLACE_TRAMO_ID), TO_CHAR(:NEW.ENLACE_TRAMO_ID));  
        END IF;  
        IF NVL(:OLD.SEQ, -1) != NVL(:NEW.SEQ, -1) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_CONEXIONES_SERVICIO', 'ID', v_pk_value, 'SEQ', TO_CHAR(:OLD.SEQ), TO_CHAR(:NEW.SEQ));  
        END IF;  
    ELSIF DELETING THEN  
        v_audit_id := AUDIT_PKG.START_AUDIT('SGT_CONEXIONES_SERVICIO', 'DELETE');  
        v_pk_value := TO_CHAR(:OLD.ID);  
    AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_CONEXIONES_SERVICIO', 'ID', v_pk_value, 'ID', TO_CHAR(:OLD.ID), NULL);  
    AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_CONEXIONES_SERVICIO', 'ID', v_pk_value, 'SERVICIO_ID', TO_CHAR(:OLD.SERVICIO_ID), NULL);  
    AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_CONEXIONES_SERVICIO', 'ID', v_pk_value, 'ENLACE_TRAMO_ID', TO_CHAR(:OLD.ENLACE_TRAMO_ID), NULL);  
    AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_CONEXIONES_SERVICIO', 'ID', v_pk_value, 'SEQ', TO_CHAR(:OLD.SEQ), NULL);  
    END IF;  
EXCEPTION  
    WHEN OTHERS THEN  
        NULL;  
END TRG_AUDIT_SGT_CONEXIONES_SERVICIO;
/
ALTER TRIGGER "TRG_AUDIT_SGT_CONEXIONES_SERVICIO" ENABLE;

  CREATE OR REPLACE EDITIONABLE TRIGGER "TRG_AUDIT_SGT_DEPTO" 
    AFTER INSERT OR UPDATE OR DELETE ON SGT_DEPTO  
    FOR EACH ROW  
DECLARE  
    v_audit_id NUMBER;  
    v_pk_value VARCHAR2(100);  
    v_action_type VARCHAR2(10);  
BEGIN  
  
    IF INSERTING THEN  
        v_action_type := 'INSERT';  
        v_pk_value := TO_CHAR(:NEW.ID);  
    ELSIF UPDATING THEN  
        v_action_type := 'UPDATE';  
        v_pk_value := TO_CHAR(:NEW.ID);  
    ELSIF DELETING THEN  
        v_action_type := 'DELETE';  
        v_pk_value := TO_CHAR(:OLD.ID);  
    END IF;  
  
  
    v_audit_id := AUDIT_PKG.START_AUDIT(  
        p_table_name => 'SGT_DEPTO',  
        p_action => v_action_type  
    );  
  
  
    IF INSERTING THEN  
  
        IF :NEW.NOMBRE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_DEPTO', 'ID', v_pk_value, 'NOMBRE', NULL, :NEW.NOMBRE);  
        END IF;  
          
        IF :NEW.CAPITAL IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_DEPTO', 'ID', v_pk_value, 'CAPITAL', NULL, :NEW.CAPITAL);  
        END IF;  
  
    ELSIF UPDATING THEN  
  
        IF NVL(:OLD.NOMBRE, 'NULL') != NVL(:NEW.NOMBRE, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_DEPTO', 'ID', v_pk_value, 'NOMBRE', :OLD.NOMBRE, :NEW.NOMBRE);  
        END IF;  
          
        IF NVL(:OLD.CAPITAL, 'NULL') != NVL(:NEW.CAPITAL, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_DEPTO', 'ID', v_pk_value, 'CAPITAL', :OLD.CAPITAL, :NEW.CAPITAL);  
        END IF;  
  
    ELSIF DELETING THEN  
  
        IF :OLD.NOMBRE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_DEPTO', 'ID', v_pk_value, 'NOMBRE', :OLD.NOMBRE, NULL);  
        END IF;  
          
        IF :OLD.CAPITAL IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_DEPTO', 'ID', v_pk_value, 'CAPITAL', :OLD.CAPITAL, NULL);  
        END IF;  
    END IF;  
  
EXCEPTION  
    WHEN OTHERS THEN  
  
        NULL;  
END TRG_AUDIT_SGT_DEPTO;
/
ALTER TRIGGER "TRG_AUDIT_SGT_DEPTO" ENABLE;

  ALTER TABLE "SGT_ENLACES_FO" ADD CONSTRAINT "FO_EQUIPO_A_ID_FK" FOREIGN KEY ("EQUIPO_ID_A")
	  REFERENCES "SGT_EQUIPOS" ("ID") ENABLE;
  ALTER TABLE "SGT_ENLACES_FO" ADD CONSTRAINT "FO_EQUIPO_B_ID_FK" FOREIGN KEY ("EQUIPO_ID_B")
	  REFERENCES "SGT_EQUIPOS" ("ID") ENABLE;
  ALTER TABLE "SGT_ENLACES_FO" ADD CONSTRAINT "FO_SITIO_A_ID_FK" FOREIGN KEY ("SITIO_ID_A")
	  REFERENCES "SGT_SITIOS" ("ID") ENABLE;
  ALTER TABLE "SGT_ENLACES_FO" ADD CONSTRAINT "FO_SITIO_B_ID_FK" FOREIGN KEY ("SITIO_ID_B")
	  REFERENCES "SGT_SITIOS" ("ID") ENABLE;

  CREATE OR REPLACE EDITIONABLE TRIGGER "SGT_ENLACES_FO_T" 
before 
insert or update on "SGT_ENLACES_FO" 
for each row 
begin 
    IF :NEW.unidad_medida = 'km' THEN 
        :NEW.abs_longitud := :NEW.certificación * 1000; 
    ELSIF :NEW.unidad_medida = 'm' THEN 
        :NEW.abs_longitud := :NEW.certificación / 1; 
    ELSIF :NEW.unidad_medida = 'cm' THEN 
        :NEW.abs_longitud := :NEW.certificación / 100; 
    END IF; 
    --actualizar info de  
    IF INSERTING THEN 
        :NEW.creado_el := SYSDATE; 
        :NEW.creado_por := nvl(wwv_flow.g_user,user); 
        :NEW.actualizado_el := SYSDATE; 
        :NEW.ACTUALIZADO_POR := nvl(wwv_flow.g_user,user); 
    ELSIF UPDATING THEN 
        :NEW.actualizado_el := SYSDATE; 
        :NEW.ACTUALIZADO_POR := nvl(wwv_flow.g_user,user); 
    END IF; 
end;
/
ALTER TRIGGER "SGT_ENLACES_FO_T" ENABLE;
  CREATE OR REPLACE EDITIONABLE TRIGGER "TRG_AUDIT_SGT_ENLACES_FO" 
    AFTER INSERT OR UPDATE OR DELETE ON SGT_ENLACES_FO  
    FOR EACH ROW  
DECLARE  
    v_audit_id NUMBER;  
    v_pk_value VARCHAR2(100);  
    v_action_type VARCHAR2(10);  
  
BEGIN  
    IF INSERTING THEN  
        v_action_type := 'INSERT';  
        v_pk_value := TO_CHAR(:NEW.ID);  
    ELSIF UPDATING THEN  
        v_action_type := 'UPDATE';  
        v_pk_value := TO_CHAR(:NEW.ID);  
    ELSIF DELETING THEN  
        v_action_type := 'DELETE';  
        v_pk_value := TO_CHAR(:OLD.ID);  
    END IF;  
  
    v_audit_id := AUDIT_PKG.START_AUDIT(  
        p_table_name => 'SGT_ENLACES_FO',  
        p_action => v_action_type  
    );  
  
    IF INSERTING THEN  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'ID', NULL, TO_CHAR(:NEW.ID));  
        IF :NEW.NOMBRE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'NOMBRE', NULL, :NEW.NOMBRE);  
        END IF;  
        IF :NEW.PUERTOS_LADO_A IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'PUERTOS_LADO_A', NULL, :NEW.PUERTOS_LADO_A);  
        END IF;  
        IF :NEW.PUERTOS_LADO_B IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'PUERTOS_LADO_B', NULL, :NEW.PUERTOS_LADO_B);  
        END IF;  
        IF :NEW.SITIO_ID_A IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'SITIO_ID_A', NULL, TO_CHAR(:NEW.SITIO_ID_A));  
        END IF;  
        IF :NEW.EQUIPO_ID_A IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'EQUIPO_ID_A', NULL, TO_CHAR(:NEW.EQUIPO_ID_A));  
        END IF;  
        IF :NEW.SITIO_ID_B IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'SITIO_ID_B', NULL, TO_CHAR(:NEW.SITIO_ID_B));  
        END IF;  
        IF :NEW.EQUIPO_ID_B IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'EQUIPO_ID_B', NULL, TO_CHAR(:NEW.EQUIPO_ID_B));  
        END IF;  
        IF :NEW.CERTIFICACIÓN IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'CERTIFICACIÓN', NULL, TO_CHAR(:NEW.CERTIFICACIÓN));  
        END IF;  
        IF :NEW.UNIDAD_MEDIDA IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'UNIDAD_MEDIDA', NULL, :NEW.UNIDAD_MEDIDA);  
        END IF;  
        IF :NEW.ABS_LONGITUD IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'ABS_LONGITUD', NULL, TO_CHAR(:NEW.ABS_LONGITUD));  
        END IF;  
        IF :NEW.CANTIDAD_DE_PELOS IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'CANTIDAD_DE_PELOS', NULL, TO_CHAR(:NEW.CANTIDAD_DE_PELOS));  
        END IF;  
        IF :NEW.TIPO_DE_FO IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'TIPO_DE_FO', NULL, :NEW.TIPO_DE_FO);  
        END IF;  
        IF :NEW.TIPO IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'TIPO', NULL, :NEW.TIPO);  
        END IF;  
        IF :NEW.LT IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'LT', NULL, :NEW.LT);  
        END IF;  
        IF :NEW.CONECTOR IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'CONECTOR', NULL, :NEW.CONECTOR);  
        END IF;  
        IF :NEW.ESTADO IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'ESTADO', NULL, :NEW.ESTADO);  
        END IF;  
        IF :NEW.COMENTARIOS IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'COMENTARIOS', NULL, :NEW.COMENTARIOS);  
        END IF;  
        IF :NEW.PROYECTO_DE_IMPLEMENTACIÓN IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'PROYECTO_DE_IMPLEMENTACIÓN', NULL, :NEW.PROYECTO_DE_IMPLEMENTACIÓN);  
        END IF;  
        IF :NEW.FECHA_IMPLEMENTACIÓN IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'FECHA_IMPLEMENTACIÓN', NULL, TO_CHAR(:NEW.FECHA_IMPLEMENTACIÓN, 'DD/MM/YYYY HH24:MI:SS'));  
        END IF;  
        IF :NEW.UNIDAD_ENCARGADA_ACTUAL IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'UNIDAD_ENCARGADA_ACTUAL', NULL, :NEW.UNIDAD_ENCARGADA_ACTUAL);  
        END IF;  
        IF :NEW.TIPO_CABLE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'TIPO_CABLE', NULL, :NEW.TIPO_CABLE);  
        END IF;  
        IF :NEW.TIPO_TENDIDO IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'TIPO_TENDIDO', NULL, :NEW.TIPO_TENDIDO);  
        END IF;  
    ELSIF UPDATING THEN  
        IF NVL(:OLD.ID, -1) != NVL(:NEW.ID, -1) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'ID', TO_CHAR(:OLD.ID), TO_CHAR(:NEW.ID));  
        END IF;  
        IF NVL(:OLD.NOMBRE, 'NULL') != NVL(:NEW.NOMBRE, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'NOMBRE', :OLD.NOMBRE, :NEW.NOMBRE);  
        END IF;  
        IF NVL(:OLD.PUERTOS_LADO_A, 'NULL') != NVL(:NEW.PUERTOS_LADO_A, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'PUERTOS_LADO_A', :OLD.PUERTOS_LADO_A, :NEW.PUERTOS_LADO_A);  
        END IF;  
        IF NVL(:OLD.PUERTOS_LADO_B, 'NULL') != NVL(:NEW.PUERTOS_LADO_B, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'PUERTOS_LADO_B', :OLD.PUERTOS_LADO_B, :NEW.PUERTOS_LADO_B);  
        END IF;  
        IF NVL(:OLD.SITIO_ID_A, -1) != NVL(:NEW.SITIO_ID_A, -1) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'SITIO_ID_A', TO_CHAR(:OLD.SITIO_ID_A), TO_CHAR(:NEW.SITIO_ID_A));  
        END IF;  
        IF NVL(:OLD.EQUIPO_ID_A, -1) != NVL(:NEW.EQUIPO_ID_A, -1) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'EQUIPO_ID_A', TO_CHAR(:OLD.EQUIPO_ID_A), TO_CHAR(:NEW.EQUIPO_ID_A));  
        END IF;  
        IF NVL(:OLD.SITIO_ID_B, -1) != NVL(:NEW.SITIO_ID_B, -1) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'SITIO_ID_B', TO_CHAR(:OLD.SITIO_ID_B), TO_CHAR(:NEW.SITIO_ID_B));  
        END IF;  
        IF NVL(:OLD.EQUIPO_ID_B, -1) != NVL(:NEW.EQUIPO_ID_B, -1) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'EQUIPO_ID_B', TO_CHAR(:OLD.EQUIPO_ID_B), TO_CHAR(:NEW.EQUIPO_ID_B));  
        END IF;  
        IF NVL(:OLD.CERTIFICACIÓN, -1) != NVL(:NEW.CERTIFICACIÓN, -1) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'CERTIFICACIÓN', TO_CHAR(:OLD.CERTIFICACIÓN), TO_CHAR(:NEW.CERTIFICACIÓN));  
        END IF;  
        IF NVL(:OLD.UNIDAD_MEDIDA, 'NULL') != NVL(:NEW.UNIDAD_MEDIDA, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'UNIDAD_MEDIDA', :OLD.UNIDAD_MEDIDA, :NEW.UNIDAD_MEDIDA);  
        END IF;  
        IF NVL(:OLD.ABS_LONGITUD, -1) != NVL(:NEW.ABS_LONGITUD, -1) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'ABS_LONGITUD', TO_CHAR(:OLD.ABS_LONGITUD), TO_CHAR(:NEW.ABS_LONGITUD));  
        END IF;  
        IF NVL(:OLD.CANTIDAD_DE_PELOS, -1) != NVL(:NEW.CANTIDAD_DE_PELOS, -1) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'CANTIDAD_DE_PELOS', TO_CHAR(:OLD.CANTIDAD_DE_PELOS), TO_CHAR(:NEW.CANTIDAD_DE_PELOS));  
        END IF;  
        IF NVL(:OLD.TIPO_DE_FO, 'NULL') != NVL(:NEW.TIPO_DE_FO, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'TIPO_DE_FO', :OLD.TIPO_DE_FO, :NEW.TIPO_DE_FO);  
        END IF;  
        IF NVL(:OLD.TIPO, 'NULL') != NVL(:NEW.TIPO, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'TIPO', :OLD.TIPO, :NEW.TIPO);  
        END IF;  
        IF NVL(:OLD.LT, 'NULL') != NVL(:NEW.LT, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'LT', :OLD.LT, :NEW.LT);  
        END IF;  
        IF NVL(:OLD.CONECTOR, 'NULL') != NVL(:NEW.CONECTOR, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'CONECTOR', :OLD.CONECTOR, :NEW.CONECTOR);  
        END IF;  
        IF NVL(:OLD.ESTADO, 'NULL') != NVL(:NEW.ESTADO, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'ESTADO', :OLD.ESTADO, :NEW.ESTADO);  
        END IF;  
        IF NVL(:OLD.COMENTARIOS, 'NULL') != NVL(:NEW.COMENTARIOS, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'COMENTARIOS', :OLD.COMENTARIOS, :NEW.COMENTARIOS);  
        END IF;  
        IF NVL(:OLD.PROYECTO_DE_IMPLEMENTACIÓN, 'NULL') != NVL(:NEW.PROYECTO_DE_IMPLEMENTACIÓN, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'PROYECTO_DE_IMPLEMENTACIÓN', :OLD.PROYECTO_DE_IMPLEMENTACIÓN, :NEW.PROYECTO_DE_IMPLEMENTACIÓN);  
        END IF;  
        IF NVL(:OLD.FECHA_IMPLEMENTACIÓN, TO_TIMESTAMP('1900-01-01', 'YYYY-MM-DD')) != NVL(:NEW.FECHA_IMPLEMENTACIÓN, TO_TIMESTAMP('1900-01-01', 'YYYY-MM-DD')) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'FECHA_IMPLEMENTACIÓN',   
                TO_CHAR(:OLD.FECHA_IMPLEMENTACIÓN, 'DD/MM/YYYY HH24:MI:SS'),   
                TO_CHAR(:NEW.FECHA_IMPLEMENTACIÓN, 'DD/MM/YYYY HH24:MI:SS'));  
        END IF;  
        IF NVL(:OLD.UNIDAD_ENCARGADA_ACTUAL, 'NULL') != NVL(:NEW.UNIDAD_ENCARGADA_ACTUAL, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'UNIDAD_ENCARGADA_ACTUAL', :OLD.UNIDAD_ENCARGADA_ACTUAL, :NEW.UNIDAD_ENCARGADA_ACTUAL);  
        END IF;  
        IF NVL(:OLD.TIPO_CABLE, 'NULL') != NVL(:NEW.TIPO_CABLE, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'TIPO_CABLE', :OLD.TIPO_CABLE, :NEW.TIPO_CABLE);  
        END IF;  
        IF NVL(:OLD.TIPO_TENDIDO, 'NULL') != NVL(:NEW.TIPO_TENDIDO, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'TIPO_TENDIDO', :OLD.TIPO_TENDIDO, :NEW.TIPO_TENDIDO);  
        END IF;  
    ELSIF DELETING THEN  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'ID', TO_CHAR(:OLD.ID), NULL);  
        IF :OLD.NOMBRE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'NOMBRE', :OLD.NOMBRE, NULL);  
        END IF;  
        IF :OLD.PUERTOS_LADO_A IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'PUERTOS_LADO_A', :OLD.PUERTOS_LADO_A, NULL);  
        END IF;  
        IF :OLD.PUERTOS_LADO_B IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'PUERTOS_LADO_B', :OLD.PUERTOS_LADO_B, NULL);  
        END IF;  
        IF :OLD.SITIO_ID_A IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'SITIO_ID_A', TO_CHAR(:OLD.SITIO_ID_A), NULL);  
        END IF;  
        IF :OLD.EQUIPO_ID_A IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'EQUIPO_ID_A', TO_CHAR(:OLD.EQUIPO_ID_A), NULL);  
        END IF;  
        IF :OLD.SITIO_ID_B IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'SITIO_ID_B', TO_CHAR(:OLD.SITIO_ID_B), NULL);  
        END IF;  
        IF :OLD.EQUIPO_ID_B IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'EQUIPO_ID_B', TO_CHAR(:OLD.EQUIPO_ID_B), NULL);  
        END IF;  
        IF :OLD.CERTIFICACIÓN IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'CERTIFICACIÓN', TO_CHAR(:OLD.CERTIFICACIÓN), NULL);  
        END IF;  
        IF :OLD.UNIDAD_MEDIDA IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'UNIDAD_MEDIDA', :OLD.UNIDAD_MEDIDA, NULL);  
        END IF;  
        IF :OLD.ABS_LONGITUD IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'ABS_LONGITUD', TO_CHAR(:OLD.ABS_LONGITUD), NULL);  
        END IF;  
        IF :OLD.CANTIDAD_DE_PELOS IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'CANTIDAD_DE_PELOS', TO_CHAR(:OLD.CANTIDAD_DE_PELOS), NULL);  
        END IF;  
        IF :OLD.TIPO_DE_FO IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'TIPO_DE_FO', :OLD.TIPO_DE_FO, NULL);  
        END IF;  
        IF :OLD.TIPO IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'TIPO', :OLD.TIPO, NULL);  
        END IF;  
        IF :OLD.LT IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'LT', :OLD.LT, NULL);  
        END IF;  
        IF :OLD.CONECTOR IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'CONECTOR', :OLD.CONECTOR, NULL);  
        END IF;  
        IF :OLD.ESTADO IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'ESTADO', :OLD.ESTADO, NULL);  
        END IF;  
        IF :OLD.COMENTARIOS IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'COMENTARIOS', :OLD.COMENTARIOS, NULL);  
        END IF;  
        IF :OLD.PROYECTO_DE_IMPLEMENTACIÓN IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'PROYECTO_DE_IMPLEMENTACIÓN', :OLD.PROYECTO_DE_IMPLEMENTACIÓN, NULL);  
        END IF;  
        IF :OLD.FECHA_IMPLEMENTACIÓN IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'FECHA_IMPLEMENTACIÓN', TO_CHAR(:OLD.FECHA_IMPLEMENTACIÓN, 'DD/MM/YYYY HH24:MI:SS'), NULL);  
        END IF;  
        IF :OLD.UNIDAD_ENCARGADA_ACTUAL IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'UNIDAD_ENCARGADA_ACTUAL', :OLD.UNIDAD_ENCARGADA_ACTUAL, NULL);  
        END IF;  
        IF :OLD.TIPO_CABLE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'TIPO_CABLE', :OLD.TIPO_CABLE, NULL);  
        END IF;  
        IF :OLD.TIPO_TENDIDO IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_FO', 'ID', v_pk_value, 'TIPO_TENDIDO', :OLD.TIPO_TENDIDO, NULL);  
        END IF;  
    END IF;  
EXCEPTION  
    WHEN OTHERS THEN  
        NULL;  
END TRG_AUDIT_SGT_ENLACES_FO;
/
ALTER TRIGGER "TRG_AUDIT_SGT_ENLACES_FO" ENABLE;

  ALTER TABLE "SGT_ENLACES_TRAMOS" ADD CONSTRAINT "ET_EQUIPO_A_FK" FOREIGN KEY ("EQUIPO_A_ID")
	  REFERENCES "SGT_EQUIPOS" ("ID") ENABLE;
  ALTER TABLE "SGT_ENLACES_TRAMOS" ADD CONSTRAINT "ET_EQUIPO_B_FK" FOREIGN KEY ("EQUIPO_B_ID")
	  REFERENCES "SGT_EQUIPOS" ("ID") ENABLE;
  ALTER TABLE "SGT_ENLACES_TRAMOS" ADD CONSTRAINT "ET_INTERFACE_A_ID_FK" FOREIGN KEY ("INTERFAZ_A_ID")
	  REFERENCES "SGT_INTERFACES" ("ID") ENABLE;
  ALTER TABLE "SGT_ENLACES_TRAMOS" ADD CONSTRAINT "ET_INTERFACE_B_ID_FK" FOREIGN KEY ("INTERFAZ_B_ID")
	  REFERENCES "SGT_INTERFACES" ("ID") ENABLE;
  ALTER TABLE "SGT_ENLACES_TRAMOS" ADD CONSTRAINT "ET_SITIO_A_FK" FOREIGN KEY ("LADO_ID")
	  REFERENCES "SGT_SITIOS" ("ID") ENABLE;

  CREATE OR REPLACE EDITIONABLE TRIGGER "ENLACES_TRAMOS_ST_TRG" 
before 
insert or update  on "SGT_ENLACES_TRAMOS" 
for each row 
begin 
    --actualizar info de  
    IF INSERTING THEN 
        :NEW.creado_el := SYSDATE; 
        :NEW.creado_por := nvl(wwv_flow.g_user,user); 
        :NEW.actualizado_el := SYSDATE; 
        :NEW.ACTUALIZADO_POR := nvl(wwv_flow.g_user,user); 
    ELSIF UPDATING THEN 
        :NEW.actualizado_el := SYSDATE; 
        :NEW.ACTUALIZADO_POR := nvl(wwv_flow.g_user,user); 
    END IF; 
end;
/
ALTER TRIGGER "ENLACES_TRAMOS_ST_TRG" ENABLE;
  CREATE OR REPLACE EDITIONABLE TRIGGER "TRG_AUDIT_SGT_ENLACES_TRAMOS" 
    AFTER INSERT OR UPDATE OR DELETE ON SGT_ENLACES_TRAMOS  
    FOR EACH ROW  
DECLARE  
    v_audit_id NUMBER;  
    v_pk_value VARCHAR2(100);  
    v_action_type VARCHAR2(10);  
BEGIN  
  
    IF INSERTING THEN  
        v_action_type := 'INSERT';  
        v_pk_value := TO_CHAR(:NEW.ID);  
    ELSIF UPDATING THEN  
        v_action_type := 'UPDATE';  
        v_pk_value := TO_CHAR(:NEW.ID);  
    ELSIF DELETING THEN  
        v_action_type := 'DELETE';  
        v_pk_value := TO_CHAR(:OLD.ID);  
    END IF;  
  
  
    v_audit_id := AUDIT_PKG.START_AUDIT(  
        p_table_name => 'SGT_ENLACES_TRAMOS',  
        p_action => v_action_type  
    );  
  
  
    IF INSERTING THEN  
  
        IF :NEW.NOMBRE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_TRAMOS', 'ID', v_pk_value, 'NOMBRE', NULL, :NEW.NOMBRE);  
        END IF;  
          
        IF :NEW.LADO_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_TRAMOS', 'ID', v_pk_value, 'LADO_ID', NULL, TO_CHAR(:NEW.LADO_ID));  
        END IF;  
          
        IF :NEW.EQUIPO_A_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_TRAMOS', 'ID', v_pk_value, 'EQUIPO_A_ID', NULL, TO_CHAR(:NEW.EQUIPO_A_ID));  
        END IF;  
          
        IF :NEW.INTERFAZ_A_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_TRAMOS', 'ID', v_pk_value, 'INTERFAZ_A_ID', NULL, TO_CHAR(:NEW.INTERFAZ_A_ID));  
        END IF;  
          
        IF :NEW.EQUIPO_B_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_TRAMOS', 'ID', v_pk_value, 'EQUIPO_B_ID', NULL, TO_CHAR(:NEW.EQUIPO_B_ID));  
        END IF;  
          
        IF :NEW.INTERFAZ_B_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_TRAMOS', 'ID', v_pk_value, 'INTERFAZ_B_ID', NULL, TO_CHAR(:NEW.INTERFAZ_B_ID));  
        END IF;  
          
        IF :NEW.TIPO_CONEXION IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_TRAMOS', 'ID', v_pk_value, 'TIPO_CONEXION', NULL, :NEW.TIPO_CONEXION);  
        END IF;  
          
        IF :NEW.ENLACE_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_TRAMOS', 'ID', v_pk_value, 'ENLACE_ID', NULL, :NEW.ENLACE_ID);  
        END IF;  
  
    ELSIF UPDATING THEN  
  
        IF NVL(:OLD.NOMBRE, 'NULL') != NVL(:NEW.NOMBRE, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_TRAMOS', 'ID', v_pk_value, 'NOMBRE', :OLD.NOMBRE, :NEW.NOMBRE);  
        END IF;  
          
        IF NVL(:OLD.LADO_ID, -1) != NVL(:NEW.LADO_ID, -1) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_TRAMOS', 'ID', v_pk_value, 'LADO_ID', TO_CHAR(:OLD.LADO_ID), TO_CHAR(:NEW.LADO_ID));  
        END IF;  
          
        IF NVL(:OLD.EQUIPO_A_ID, -1) != NVL(:NEW.EQUIPO_A_ID, -1) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_TRAMOS', 'ID', v_pk_value, 'EQUIPO_A_ID', TO_CHAR(:OLD.EQUIPO_A_ID), TO_CHAR(:NEW.EQUIPO_A_ID));  
        END IF;  
          
        IF NVL(:OLD.INTERFAZ_A_ID, -1) != NVL(:NEW.INTERFAZ_A_ID, -1) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_TRAMOS', 'ID', v_pk_value, 'INTERFAZ_A_ID', TO_CHAR(:OLD.INTERFAZ_A_ID), TO_CHAR(:NEW.INTERFAZ_A_ID));  
        END IF;  
          
        IF NVL(:OLD.EQUIPO_B_ID, -1) != NVL(:NEW.EQUIPO_B_ID, -1) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_TRAMOS', 'ID', v_pk_value, 'EQUIPO_B_ID', TO_CHAR(:OLD.EQUIPO_B_ID), TO_CHAR(:NEW.EQUIPO_B_ID));  
        END IF;  
          
        IF NVL(:OLD.INTERFAZ_B_ID, -1) != NVL(:NEW.INTERFAZ_B_ID, -1) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_TRAMOS', 'ID', v_pk_value, 'INTERFAZ_B_ID', TO_CHAR(:OLD.INTERFAZ_B_ID), TO_CHAR(:NEW.INTERFAZ_B_ID));  
        END IF;  
          
        IF NVL(:OLD.TIPO_CONEXION, 'NULL') != NVL(:NEW.TIPO_CONEXION, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_TRAMOS', 'ID', v_pk_value, 'TIPO_CONEXION', :OLD.TIPO_CONEXION, :NEW.TIPO_CONEXION);  
        END IF;  
          
        IF NVL(:OLD.ENLACE_ID, 'NULL') != NVL(:NEW.ENLACE_ID, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_TRAMOS', 'ID', v_pk_value, 'ENLACE_ID', :OLD.ENLACE_ID, :NEW.ENLACE_ID);  
        END IF;  
  
    ELSIF DELETING THEN  
  
        IF :OLD.NOMBRE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_TRAMOS', 'ID', v_pk_value, 'NOMBRE', :OLD.NOMBRE, NULL);  
        END IF;  
          
        IF :OLD.LADO_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_TRAMOS', 'ID', v_pk_value, 'LADO_ID', TO_CHAR(:OLD.LADO_ID), NULL);  
        END IF;  
          
        IF :OLD.EQUIPO_A_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_TRAMOS', 'ID', v_pk_value, 'EQUIPO_A_ID', TO_CHAR(:OLD.EQUIPO_A_ID), NULL);  
        END IF;  
          
        IF :OLD.INTERFAZ_A_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_TRAMOS', 'ID', v_pk_value, 'INTERFAZ_A_ID', TO_CHAR(:OLD.INTERFAZ_A_ID), NULL);  
        END IF;  
          
        IF :OLD.EQUIPO_B_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_TRAMOS', 'ID', v_pk_value, 'EQUIPO_B_ID', TO_CHAR(:OLD.EQUIPO_B_ID), NULL);  
        END IF;  
          
        IF :OLD.INTERFAZ_B_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_TRAMOS', 'ID', v_pk_value, 'INTERFAZ_B_ID', TO_CHAR(:OLD.INTERFAZ_B_ID), NULL);  
        END IF;  
          
        IF :OLD.TIPO_CONEXION IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_TRAMOS', 'ID', v_pk_value, 'TIPO_CONEXION', :OLD.TIPO_CONEXION, NULL);  
        END IF;  
          
        IF :OLD.ENLACE_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_TRAMOS', 'ID', v_pk_value, 'ENLACE_ID', :OLD.ENLACE_ID, NULL);  
        END IF;  
    END IF;  
  
EXCEPTION  
    WHEN OTHERS THEN  
  
        NULL;   
END TRG_AUDIT_SGT_ENLACES_TRAMOS;
/
ALTER TRIGGER "TRG_AUDIT_SGT_ENLACES_TRAMOS" ENABLE;

  CREATE OR REPLACE EDITIONABLE TRIGGER "ENLACE_WAN_ST_TRG2" 
before 
insert or update  on "SGT_ENLACES_WAN" 
for each row 
begin 
    --actualizar info de  
    IF INSERTING THEN 
        :NEW.creado_el := SYSDATE; 
        :NEW.creado_por := nvl(wwv_flow.g_user,user); 
        :NEW.actualizado_el := SYSDATE; 
        :NEW.ACTUALIZADO_POR := nvl(wwv_flow.g_user,user); 
    ELSIF UPDATING THEN 
        :NEW.actualizado_el := SYSDATE; 
        :NEW.ACTUALIZADO_POR := nvl(wwv_flow.g_user,user); 
    END IF; 
end;
/
ALTER TRIGGER "ENLACE_WAN_ST_TRG2" ENABLE;
  CREATE OR REPLACE EDITIONABLE TRIGGER "TRG_AUDIT_SGT_ENLACES_WAN" 
AFTER INSERT OR UPDATE OR DELETE ON SGT_ENLACES_WAN  
FOR EACH ROW  
DECLARE  
    v_action VARCHAR2(10);  
    v_audit_id NUMBER;  
BEGIN  
    -- Determinar tipo de operación  
    IF INSERTING THEN  
        v_action := 'INSERT';  
    ELSIF UPDATING THEN  
        v_action := 'UPDATE';  
    ELSIF DELETING THEN  
        v_action := 'DELETE';  
    END IF;  
      
    v_audit_id := AUDIT_PKG.START_AUDIT('SGT_ENLACES_WAN', v_action);  
      
    IF INSERTING THEN  
        -- Campos obligatorios  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_WAN', 'ID', :NEW.ID, 'NOMBRE', NULL, :NEW.NOMBRE);  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_WAN', 'ID', :NEW.ID, 'GRUPO_RED', NULL, :NEW.GRUPO_RED);  
          
        -- Campos de auditoría que pueden ser nulos  
      
    ELSIF UPDATING THEN  
        -- NOMBRE  
        IF :OLD.NOMBRE != :NEW.NOMBRE OR   
           (:OLD.NOMBRE IS NULL AND :NEW.NOMBRE IS NOT NULL) OR  
           (:OLD.NOMBRE IS NOT NULL AND :NEW.NOMBRE IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_WAN', 'ID', :NEW.ID, 'NOMBRE', :OLD.NOMBRE, :NEW.NOMBRE);  
        END IF;  
          
        -- GRUPO_RED  
        IF :OLD.GRUPO_RED != :NEW.GRUPO_RED OR   
           (:OLD.GRUPO_RED IS NULL AND :NEW.GRUPO_RED IS NOT NULL) OR  
           (:OLD.GRUPO_RED IS NOT NULL AND :NEW.GRUPO_RED IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_WAN', 'ID', :NEW.ID, 'GRUPO_RED', :OLD.GRUPO_RED, :NEW.GRUPO_RED);  
        END IF;  
          
          
          
          
          
          
      
    -- Para eliminaciones - registramos los valores que se están eliminando  
    ELSIF DELETING THEN  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_WAN', 'ID', :OLD.ID, 'NOMBRE', :OLD.NOMBRE, NULL);  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_WAN', 'ID', :OLD.ID, 'GRUPO_RED', :OLD.GRUPO_RED, NULL);  
          
 
    END IF;  
END;
/
ALTER TRIGGER "TRG_AUDIT_SGT_ENLACES_WAN" ENABLE;

  ALTER TABLE "SGT_ENLACES_WAN_SERVICIO" ADD CONSTRAINT "SGT_ENLACES_WAN_SERVICIO_CON" FOREIGN KEY ("ENLACE_ID")
	  REFERENCES "SGT_ENLACES_WAN" ("ID") ENABLE;
  ALTER TABLE "SGT_ENLACES_WAN_SERVICIO" ADD FOREIGN KEY ("SERVICIO_ID")
	  REFERENCES "SGT_SERVICIOS" ("ID") ENABLE;

  CREATE INDEX "SGT_ENLACES_WAN_SERVICIO_I1" ON "SGT_ENLACES_WAN_SERVICIO" ("SERVICIO_ID") 
  ;

  CREATE INDEX "SGT_ENLACES_WAN_SERVICIO_I2" ON "SGT_ENLACES_WAN_SERVICIO" ("ENLACE_ID") 
  ;

  CREATE OR REPLACE EDITIONABLE TRIGGER "SGT_EWS_ID_BI" 
BEFORE INSERT ON SGT_ENLACES_WAN_SERVICIO 
FOR EACH ROW 
  WHEN (NEW.ID IS NULL) BEGIN 
  SELECT SGT_ENLACES_WAN_SERVICIO_ID_SEQ.NEXTVAL INTO :NEW.ID FROM dual; 
END;
/
ALTER TRIGGER "SGT_EWS_ID_BI" ENABLE;
  CREATE OR REPLACE EDITIONABLE TRIGGER "TRG_AUDIT_SGT_ENLACES_WAN_SERVICIO" 
AFTER INSERT OR UPDATE OR DELETE ON SGT_ENLACES_WAN_SERVICIO 
FOR EACH ROW 
DECLARE 
    v_action   VARCHAR2(10); 
    v_audit_id NUMBER; 
BEGIN 
    -- Determinar tipo de operación 
    IF INSERTING THEN 
        v_action := 'INSERT'; 
    ELSIF UPDATING THEN 
        v_action := 'UPDATE'; 
    ELSIF DELETING THEN 
        v_action := 'DELETE'; 
    END IF; 
 
    -- Iniciar auditoría 
    v_audit_id := AUDIT_PKG.START_AUDIT('SGT_ENLACES_WAN_SERVICIO', v_action); 
 
    IF INSERTING THEN 
        -- Auditar columnas de negocio (omitir creado/modificado) 
        IF :NEW.SERVICIO_ID IS NOT NULL THEN 
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_WAN_SERVICIO', 'ID', :NEW.ID, 'SERVICIO_ID', NULL, TO_CHAR(:NEW.SERVICIO_ID)); 
        END IF; 
 
        IF :NEW.ENLACE_ID IS NOT NULL THEN 
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_WAN_SERVICIO', 'ID', :NEW.ID, 'ENLACE_ID', NULL, TO_CHAR(:NEW.ENLACE_ID)); 
        END IF; 
 
        IF :NEW.SEQ IS NOT NULL THEN 
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_WAN_SERVICIO', 'ID', :NEW.ID, 'SEQ', NULL, TO_CHAR(:NEW.SEQ)); 
        END IF; 
 
    ELSIF UPDATING THEN 
        -- SERVICIO_ID 
        IF :OLD.SERVICIO_ID != :NEW.SERVICIO_ID OR 
           (:OLD.SERVICIO_ID IS NULL AND :NEW.SERVICIO_ID IS NOT NULL) OR 
           (:OLD.SERVICIO_ID IS NOT NULL AND :NEW.SERVICIO_ID IS NULL) THEN 
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_WAN_SERVICIO', 'ID', :NEW.ID, 'SERVICIO_ID', TO_CHAR(:OLD.SERVICIO_ID), TO_CHAR(:NEW.SERVICIO_ID)); 
        END IF; 
 
        -- ENLACE_ID 
        IF :OLD.ENLACE_ID != :NEW.ENLACE_ID OR 
           (:OLD.ENLACE_ID IS NULL AND :NEW.ENLACE_ID IS NOT NULL) OR 
           (:OLD.ENLACE_ID IS NOT NULL AND :NEW.ENLACE_ID IS NULL) THEN 
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_WAN_SERVICIO', 'ID', :NEW.ID, 'ENLACE_ID', TO_CHAR(:OLD.ENLACE_ID), TO_CHAR(:NEW.ENLACE_ID)); 
        END IF; 
 
        -- SEQ 
        IF :OLD.SEQ != :NEW.SEQ OR 
           (:OLD.SEQ IS NULL AND :NEW.SEQ IS NOT NULL) OR 
           (:OLD.SEQ IS NOT NULL AND :NEW.SEQ IS NULL) THEN 
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_WAN_SERVICIO', 'ID', :NEW.ID, 'SEQ', TO_CHAR(:OLD.SEQ), TO_CHAR(:NEW.SEQ)); 
        END IF; 
 
    ELSIF DELETING THEN 
        -- Registrar los valores eliminados 
        IF :OLD.SERVICIO_ID IS NOT NULL THEN 
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_WAN_SERVICIO', 'ID', :OLD.ID, 'SERVICIO_ID', TO_CHAR(:OLD.SERVICIO_ID), NULL); 
        END IF; 
 
        IF :OLD.ENLACE_ID IS NOT NULL THEN 
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_WAN_SERVICIO', 'ID', :OLD.ID, 'ENLACE_ID', TO_CHAR(:OLD.ENLACE_ID), NULL); 
        END IF; 
 
        IF :OLD.SEQ IS NOT NULL THEN 
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACES_WAN_SERVICIO', 'ID', :OLD.ID, 'SEQ', TO_CHAR(:OLD.SEQ), NULL); 
        END IF; 
    END IF; 
END;
/
ALTER TRIGGER "TRG_AUDIT_SGT_ENLACES_WAN_SERVICIO" ENABLE;

  CREATE OR REPLACE EDITIONABLE TRIGGER "TRG_AUDIT_SGT_ENLACE_LOGICO_TRAMO" 
    AFTER INSERT OR UPDATE OR DELETE ON SGT_ENLACE_LOGICO_TRAMO  
    FOR EACH ROW  
DECLARE  
    v_audit_id NUMBER;  
    v_pk_value VARCHAR2(100);  
    v_action_type VARCHAR2(10);  
BEGIN  
  
    IF INSERTING THEN  
        v_action_type := 'INSERT';  
        v_pk_value := TO_CHAR(:NEW.ID);  
    ELSIF UPDATING THEN  
        v_action_type := 'UPDATE';  
        v_pk_value := TO_CHAR(:NEW.ID);  
    ELSIF DELETING THEN  
        v_action_type := 'DELETE';  
        v_pk_value := TO_CHAR(:OLD.ID);  
    END IF;  
  
  
    v_audit_id := AUDIT_PKG.START_AUDIT(  
        p_table_name => 'SGT_ENLACE_LOGICO_TRAMO',  
        p_action => v_action_type  
    );  
  
  
    IF INSERTING THEN  
  
        IF :NEW.ENLACE_LOGICO_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACE_LOGICO_TRAMO', 'ID', v_pk_value, 'ENLACE_LOGICO_ID', NULL, TO_CHAR(:NEW.ENLACE_LOGICO_ID));  
        END IF;  
          
        IF :NEW.TRAMO_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACE_LOGICO_TRAMO', 'ID', v_pk_value, 'TRAMO_ID', NULL, TO_CHAR(:NEW.TRAMO_ID));  
        END IF;  
  
    ELSIF UPDATING THEN  
  
        IF NVL(:OLD.ENLACE_LOGICO_ID, -1) != NVL(:NEW.ENLACE_LOGICO_ID, -1) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACE_LOGICO_TRAMO', 'ID', v_pk_value, 'ENLACE_LOGICO_ID', TO_CHAR(:OLD.ENLACE_LOGICO_ID), TO_CHAR(:NEW.ENLACE_LOGICO_ID));  
        END IF;  
          
        IF NVL(:OLD.TRAMO_ID, -1) != NVL(:NEW.TRAMO_ID, -1) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACE_LOGICO_TRAMO', 'ID', v_pk_value, 'TRAMO_ID', TO_CHAR(:OLD.TRAMO_ID), TO_CHAR(:NEW.TRAMO_ID));  
        END IF;  
  
    ELSIF DELETING THEN  
  
        IF :OLD.ENLACE_LOGICO_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACE_LOGICO_TRAMO', 'ID', v_pk_value, 'ENLACE_LOGICO_ID', TO_CHAR(:OLD.ENLACE_LOGICO_ID), NULL);  
        END IF;  
          
        IF :OLD.TRAMO_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ENLACE_LOGICO_TRAMO', 'ID', v_pk_value, 'TRAMO_ID', TO_CHAR(:OLD.TRAMO_ID), NULL);  
        END IF;  
    END IF;  
  
EXCEPTION  
    WHEN OTHERS THEN  
          
        NULL;   
END TRG_AUDIT_SGT_ENLACE_LOGICO_TRAMO;
/
ALTER TRIGGER "TRG_AUDIT_SGT_ENLACE_LOGICO_TRAMO" ENABLE;

  ALTER TABLE "SGT_EQUIPOS" ADD CONSTRAINT "EQUIPOS_CON_RACKS_CHK" FOREIGN KEY ("RACK_ID")
	  REFERENCES "SGT_RACKS" ("ID") ENABLE;
  ALTER TABLE "SGT_EQUIPOS" ADD CONSTRAINT "EQUIPOS_CON_TIPO_EQUIPOS_CHK" FOREIGN KEY ("TIPO_EQUIPO_ID")
	  REFERENCES "SGT_TIPO_EQUIPOS" ("ID") ENABLE;
  ALTER TABLE "SGT_EQUIPOS" ADD CONSTRAINT "SITIO_ID_FK" FOREIGN KEY ("SITIO_ID")
	  REFERENCES "SGT_SITIOS" ("ID") ENABLE;

  CREATE OR REPLACE EDITIONABLE TRIGGER "EQUIPOS_ST_TRG" 
before 
insert or update on "SGT_EQUIPOS" 
for each row 
begin 
    --actualizar info de  
    IF INSERTING THEN 
        :NEW.creado_el := SYSDATE; 
        :NEW.creado_por := nvl(wwv_flow.g_user,user); 
        :NEW.actualizado_el := SYSDATE; 
        :NEW.ACTUALIZADO_POR := nvl(wwv_flow.g_user,user); 
    ELSIF UPDATING THEN 
        :NEW.actualizado_el := SYSDATE; 
        :NEW.ACTUALIZADO_POR := nvl(wwv_flow.g_user,user); 
    END IF; 
end;
/
ALTER TRIGGER "EQUIPOS_ST_TRG" ENABLE;
  CREATE OR REPLACE EDITIONABLE TRIGGER "TRG_AUDIT_SGT_EQUIPOS" 
    AFTER INSERT OR UPDATE OR DELETE ON SGT_EQUIPOS  
    FOR EACH ROW  
DECLARE  
    v_action VARCHAR2(10);  
    v_audit_id NUMBER;  
BEGIN  
    -- Determinar el tipo de operación  
    IF INSERTING THEN  
        v_action := 'INSERT';  
    ELSIF UPDATING THEN  
        v_action := 'UPDATE';  
    ELSIF DELETING THEN  
        v_action := 'DELETE';  
    END IF;  
  
    -- Crear el registro maestro de auditoría usando la función actual  
    v_audit_id := AUDIT_PKG.START_AUDIT('SGT_EQUIPOS', v_action);  
  
  
      
    IF INSERTING THEN  
        -- Campos que pueden ser nulos - solo registrar si tienen valor  
        IF :NEW.UNIDAD_ENCARGADA IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'UNIDAD_ENCARGADA', NULL, :NEW.UNIDAD_ENCARGADA);  
        END IF;  
          
        IF :NEW.RACK_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'RACK_ID', NULL, TO_CHAR(:NEW.RACK_ID));  
        END IF;  
          
        IF :NEW.U IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'U', NULL, TO_CHAR(:NEW.U));  
        END IF;  
          
        IF :NEW.TIPO_RED IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'TIPO_RED', NULL, :NEW.TIPO_RED);  
        END IF;  
          
        IF :NEW.NOMBRE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'NOMBRE', NULL, :NEW.NOMBRE);  
        END IF;  
          
        IF :NEW.TIPO_EQUIPO_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'TIPO_EQUIPO_ID', NULL, TO_CHAR(:NEW.TIPO_EQUIPO_ID));  
        END IF;  
          
        IF :NEW.SUB_TIPO_EQUIPO IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'SUB_TIPO_EQUIPO', NULL, :NEW.SUB_TIPO_EQUIPO);  
        END IF;  
          
        IF :NEW.MARCA IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'MARCA', NULL, :NEW.MARCA);  
        END IF;  
          
        IF :NEW.MODELO IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'MODELO', NULL, :NEW.MODELO);  
        END IF;  
          
        IF :NEW.ESTADO IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'ESTADO', NULL, :NEW.ESTADO);  
        END IF;  
          
        IF :NEW.OBSERVACIONES IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'OBSERVACIONES', NULL, :NEW.OBSERVACIONES);  
        END IF;  
          
        IF :NEW.NI_ANDE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'NI_ANDE', NULL, :NEW.NI_ANDE);  
        END IF;  
          
        IF :NEW.SERIAL_NUMBER IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'SERIAL_NUMBER', NULL, :NEW.SERIAL_NUMBER);  
        END IF;  
          
        IF :NEW.VERSION_HARDWARE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'VERSION_HARDWARE', NULL, :NEW.VERSION_HARDWARE);  
        END IF;  
          
        IF :NEW.VERSION_SOFTWARE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'VERSION_SOFTWARE', NULL, :NEW.VERSION_SOFTWARE);  
        END IF;  
          
        IF :NEW.VERSION_PATCH IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'VERSION_PATCH', NULL, :NEW.VERSION_PATCH);  
        END IF;  
          
        IF :NEW.IP_GESTION IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'IP_GESTION', NULL, :NEW.IP_GESTION);  
        END IF;  
          
        IF :NEW.ALIMENTACION1_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'ALIMENTACION1_ID', NULL, :NEW.ALIMENTACION1_ID);  
        END IF;  
          
        IF :NEW.ALIMENTACION2_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'ALIMENTACION2_ID', NULL, :NEW.ALIMENTACION2_ID);  
        END IF;  
          
        IF :NEW.PROYECTO_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'PROYECTO_ID', NULL, :NEW.PROYECTO_ID);  
        END IF;  
          
        IF :NEW.FECHA_IMPLE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'FECHA_IMPLE', NULL, TO_CHAR(:NEW.FECHA_IMPLE, 'DD/MM/YYYY HH24:MI:SS'));  
        END IF;  
          
        IF :NEW.ALTURA_U IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'ALTURA_U', NULL, TO_CHAR(:NEW.ALTURA_U));  
        END IF;  
          
        IF :NEW.POSICION IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'POSICION', NULL, :NEW.POSICION);  
        END IF;  
          
        IF :NEW.SITIO_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'SITIO_ID', NULL, TO_CHAR(:NEW.SITIO_ID));  
        END IF;  
  
    ELSIF UPDATING THEN  
  
        IF :OLD.UNIDAD_ENCARGADA != :NEW.UNIDAD_ENCARGADA OR   
           (:OLD.UNIDAD_ENCARGADA IS NULL AND :NEW.UNIDAD_ENCARGADA IS NOT NULL) OR  
           (:OLD.UNIDAD_ENCARGADA IS NOT NULL AND :NEW.UNIDAD_ENCARGADA IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'UNIDAD_ENCARGADA', :OLD.UNIDAD_ENCARGADA, :NEW.UNIDAD_ENCARGADA);  
        END IF;  
          
        IF :OLD.RACK_ID != :NEW.RACK_ID OR   
           (:OLD.RACK_ID IS NULL AND :NEW.RACK_ID IS NOT NULL) OR  
           (:OLD.RACK_ID IS NOT NULL AND :NEW.RACK_ID IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'RACK_ID',   
                                 TO_CHAR(:OLD.RACK_ID), TO_CHAR(:NEW.RACK_ID));  
        END IF;  
          
        IF :OLD.U != :NEW.U OR   
           (:OLD.U IS NULL AND :NEW.U IS NOT NULL) OR  
           (:OLD.U IS NOT NULL AND :NEW.U IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'U',   
                                 TO_CHAR(:OLD.U), TO_CHAR(:NEW.U));  
        END IF;  
          
        IF :OLD.TIPO_RED != :NEW.TIPO_RED OR   
           (:OLD.TIPO_RED IS NULL AND :NEW.TIPO_RED IS NOT NULL) OR  
           (:OLD.TIPO_RED IS NOT NULL AND :NEW.TIPO_RED IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'TIPO_RED', :OLD.TIPO_RED, :NEW.TIPO_RED);  
        END IF;  
          
        IF :OLD.NOMBRE != :NEW.NOMBRE OR   
           (:OLD.NOMBRE IS NULL AND :NEW.NOMBRE IS NOT NULL) OR  
           (:OLD.NOMBRE IS NOT NULL AND :NEW.NOMBRE IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'NOMBRE', :OLD.NOMBRE, :NEW.NOMBRE);  
        END IF;  
          
        IF :OLD.TIPO_EQUIPO_ID != :NEW.TIPO_EQUIPO_ID OR   
           (:OLD.TIPO_EQUIPO_ID IS NULL AND :NEW.TIPO_EQUIPO_ID IS NOT NULL) OR  
           (:OLD.TIPO_EQUIPO_ID IS NOT NULL AND :NEW.TIPO_EQUIPO_ID IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'TIPO_EQUIPO_ID',   
                                 TO_CHAR(:OLD.TIPO_EQUIPO_ID), TO_CHAR(:NEW.TIPO_EQUIPO_ID));  
        END IF;  
          
        IF :OLD.SUB_TIPO_EQUIPO != :NEW.SUB_TIPO_EQUIPO OR   
           (:OLD.SUB_TIPO_EQUIPO IS NULL AND :NEW.SUB_TIPO_EQUIPO IS NOT NULL) OR  
           (:OLD.SUB_TIPO_EQUIPO IS NOT NULL AND :NEW.SUB_TIPO_EQUIPO IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'SUB_TIPO_EQUIPO', :OLD.SUB_TIPO_EQUIPO, :NEW.SUB_TIPO_EQUIPO);  
        END IF;  
          
        IF :OLD.MARCA != :NEW.MARCA OR   
           (:OLD.MARCA IS NULL AND :NEW.MARCA IS NOT NULL) OR  
           (:OLD.MARCA IS NOT NULL AND :NEW.MARCA IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'MARCA', :OLD.MARCA, :NEW.MARCA);  
        END IF;  
          
        IF :OLD.MODELO != :NEW.MODELO OR   
           (:OLD.MODELO IS NULL AND :NEW.MODELO IS NOT NULL) OR  
           (:OLD.MODELO IS NOT NULL AND :NEW.MODELO IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'MODELO', :OLD.MODELO, :NEW.MODELO);  
        END IF;  
          
        IF :OLD.ESTADO != :NEW.ESTADO OR   
           (:OLD.ESTADO IS NULL AND :NEW.ESTADO IS NOT NULL) OR  
           (:OLD.ESTADO IS NOT NULL AND :NEW.ESTADO IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'ESTADO', :OLD.ESTADO, :NEW.ESTADO);  
        END IF;  
          
        IF :OLD.OBSERVACIONES != :NEW.OBSERVACIONES OR   
           (:OLD.OBSERVACIONES IS NULL AND :NEW.OBSERVACIONES IS NOT NULL) OR  
           (:OLD.OBSERVACIONES IS NOT NULL AND :NEW.OBSERVACIONES IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'OBSERVACIONES', :OLD.OBSERVACIONES, :NEW.OBSERVACIONES);  
        END IF;  
          
        IF :OLD.NI_ANDE != :NEW.NI_ANDE OR   
           (:OLD.NI_ANDE IS NULL AND :NEW.NI_ANDE IS NOT NULL) OR  
           (:OLD.NI_ANDE IS NOT NULL AND :NEW.NI_ANDE IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'NI_ANDE', :OLD.NI_ANDE, :NEW.NI_ANDE);  
        END IF;  
          
        IF :OLD.SERIAL_NUMBER != :NEW.SERIAL_NUMBER OR   
           (:OLD.SERIAL_NUMBER IS NULL AND :NEW.SERIAL_NUMBER IS NOT NULL) OR  
           (:OLD.SERIAL_NUMBER IS NOT NULL AND :NEW.SERIAL_NUMBER IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'SERIAL_NUMBER', :OLD.SERIAL_NUMBER, :NEW.SERIAL_NUMBER);  
        END IF;  
          
        IF :OLD.VERSION_HARDWARE != :NEW.VERSION_HARDWARE OR   
           (:OLD.VERSION_HARDWARE IS NULL AND :NEW.VERSION_HARDWARE IS NOT NULL) OR  
           (:OLD.VERSION_HARDWARE IS NOT NULL AND :NEW.VERSION_HARDWARE IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'VERSION_HARDWARE', :OLD.VERSION_HARDWARE, :NEW.VERSION_HARDWARE);  
        END IF;  
          
        IF :OLD.VERSION_SOFTWARE != :NEW.VERSION_SOFTWARE OR   
           (:OLD.VERSION_SOFTWARE IS NULL AND :NEW.VERSION_SOFTWARE IS NOT NULL) OR  
           (:OLD.VERSION_SOFTWARE IS NOT NULL AND :NEW.VERSION_SOFTWARE IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'VERSION_SOFTWARE', :OLD.VERSION_SOFTWARE, :NEW.VERSION_SOFTWARE);  
        END IF;  
          
        IF :OLD.VERSION_PATCH != :NEW.VERSION_PATCH OR   
           (:OLD.VERSION_PATCH IS NULL AND :NEW.VERSION_PATCH IS NOT NULL) OR  
           (:OLD.VERSION_PATCH IS NOT NULL AND :NEW.VERSION_PATCH IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'VERSION_PATCH', :OLD.VERSION_PATCH, :NEW.VERSION_PATCH);  
        END IF;  
          
        IF :OLD.IP_GESTION != :NEW.IP_GESTION OR   
           (:OLD.IP_GESTION IS NULL AND :NEW.IP_GESTION IS NOT NULL) OR  
           (:OLD.IP_GESTION IS NOT NULL AND :NEW.IP_GESTION IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'IP_GESTION', :OLD.IP_GESTION, :NEW.IP_GESTION);  
        END IF;  
          
        IF :OLD.ALIMENTACION1_ID != :NEW.ALIMENTACION1_ID OR   
           (:OLD.ALIMENTACION1_ID IS NULL AND :NEW.ALIMENTACION1_ID IS NOT NULL) OR  
           (:OLD.ALIMENTACION1_ID IS NOT NULL AND :NEW.ALIMENTACION1_ID IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'ALIMENTACION1_ID', :OLD.ALIMENTACION1_ID, :NEW.ALIMENTACION1_ID);  
        END IF;  
          
        IF :OLD.ALIMENTACION2_ID != :NEW.ALIMENTACION2_ID OR   
           (:OLD.ALIMENTACION2_ID IS NULL AND :NEW.ALIMENTACION2_ID IS NOT NULL) OR  
           (:OLD.ALIMENTACION2_ID IS NOT NULL AND :NEW.ALIMENTACION2_ID IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'ALIMENTACION2_ID', :OLD.ALIMENTACION2_ID, :NEW.ALIMENTACION2_ID);  
        END IF;  
          
        IF :OLD.PROYECTO_ID != :NEW.PROYECTO_ID OR   
           (:OLD.PROYECTO_ID IS NULL AND :NEW.PROYECTO_ID IS NOT NULL) OR  
           (:OLD.PROYECTO_ID IS NOT NULL AND :NEW.PROYECTO_ID IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'PROYECTO_ID', :OLD.PROYECTO_ID, :NEW.PROYECTO_ID);  
        END IF;  
          
        IF :OLD.FECHA_IMPLE != :NEW.FECHA_IMPLE OR   
           (:OLD.FECHA_IMPLE IS NULL AND :NEW.FECHA_IMPLE IS NOT NULL) OR  
           (:OLD.FECHA_IMPLE IS NOT NULL AND :NEW.FECHA_IMPLE IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'FECHA_IMPLE',   
                                 TO_CHAR(:OLD.FECHA_IMPLE, 'DD/MM/YYYY HH24:MI:SS'), TO_CHAR(:NEW.FECHA_IMPLE, 'DD/MM/YYYY HH24:MI:SS'));  
        END IF;  
          
        IF :OLD.ALTURA_U != :NEW.ALTURA_U OR   
           (:OLD.ALTURA_U IS NULL AND :NEW.ALTURA_U IS NOT NULL) OR  
           (:OLD.ALTURA_U IS NOT NULL AND :NEW.ALTURA_U IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'ALTURA_U',   
                                 TO_CHAR(:OLD.ALTURA_U), TO_CHAR(:NEW.ALTURA_U));  
        END IF;  
          
        IF :OLD.POSICION != :NEW.POSICION OR   
           (:OLD.POSICION IS NULL AND :NEW.POSICION IS NOT NULL) OR  
           (:OLD.POSICION IS NOT NULL AND :NEW.POSICION IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'POSICION', :OLD.POSICION, :NEW.POSICION);  
        END IF;  
          
        IF :OLD.SITIO_ID != :NEW.SITIO_ID OR   
           (:OLD.SITIO_ID IS NULL AND :NEW.SITIO_ID IS NOT NULL) OR  
           (:OLD.SITIO_ID IS NOT NULL AND :NEW.SITIO_ID IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :NEW.ID, 'SITIO_ID',   
                                 TO_CHAR(:OLD.SITIO_ID), TO_CHAR(:NEW.SITIO_ID));  
        END IF;  
      
  
    ELSIF DELETING THEN  
  
        IF :OLD.UNIDAD_ENCARGADA IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :OLD.ID, 'UNIDAD_ENCARGADA', :OLD.UNIDAD_ENCARGADA, NULL);  
        END IF;  
          
        IF :OLD.RACK_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :OLD.ID, 'RACK_ID', TO_CHAR(:OLD.RACK_ID), NULL);  
        END IF;  
          
        IF :OLD.U IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :OLD.ID, 'U', TO_CHAR(:OLD.U), NULL);  
        END IF;  
          
        IF :OLD.TIPO_RED IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :OLD.ID, 'TIPO_RED', :OLD.TIPO_RED, NULL);  
        END IF;  
          
        IF :OLD.NOMBRE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :OLD.ID, 'NOMBRE', :OLD.NOMBRE, NULL);  
        END IF;  
          
        IF :OLD.TIPO_EQUIPO_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :OLD.ID, 'TIPO_EQUIPO_ID', TO_CHAR(:OLD.TIPO_EQUIPO_ID), NULL);  
        END IF;  
          
        IF :OLD.SUB_TIPO_EQUIPO IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :OLD.ID, 'SUB_TIPO_EQUIPO', :OLD.SUB_TIPO_EQUIPO, NULL);  
        END IF;  
          
        IF :OLD.MARCA IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :OLD.ID, 'MARCA', :OLD.MARCA, NULL);  
        END IF;  
          
        IF :OLD.MODELO IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :OLD.ID, 'MODELO', :OLD.MODELO, NULL);  
        END IF;  
          
        IF :OLD.ESTADO IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :OLD.ID, 'ESTADO', :OLD.ESTADO, NULL);  
        END IF;  
          
        IF :OLD.OBSERVACIONES IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :OLD.ID, 'OBSERVACIONES', :OLD.OBSERVACIONES, NULL);  
        END IF;  
          
        IF :OLD.NI_ANDE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :OLD.ID, 'NI_ANDE', :OLD.NI_ANDE, NULL);  
        END IF;  
          
        IF :OLD.SERIAL_NUMBER IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :OLD.ID, 'SERIAL_NUMBER', :OLD.SERIAL_NUMBER, NULL);  
        END IF;  
          
        IF :OLD.VERSION_HARDWARE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :OLD.ID, 'VERSION_HARDWARE', :OLD.VERSION_HARDWARE, NULL);  
        END IF;  
          
        IF :OLD.VERSION_SOFTWARE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :OLD.ID, 'VERSION_SOFTWARE', :OLD.VERSION_SOFTWARE, NULL);  
        END IF;  
          
        IF :OLD.VERSION_PATCH IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :OLD.ID, 'VERSION_PATCH', :OLD.VERSION_PATCH, NULL);  
        END IF;  
          
        IF :OLD.IP_GESTION IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :OLD.ID, 'IP_GESTION', :OLD.IP_GESTION, NULL);  
        END IF;  
          
        IF :OLD.ALIMENTACION1_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :OLD.ID, 'ALIMENTACION1_ID', :OLD.ALIMENTACION1_ID, NULL);  
        END IF;  
          
        IF :OLD.ALIMENTACION2_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :OLD.ID, 'ALIMENTACION2_ID', :OLD.ALIMENTACION2_ID, NULL);  
        END IF;  
          
        IF :OLD.PROYECTO_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :OLD.ID, 'PROYECTO_ID', :OLD.PROYECTO_ID, NULL);  
        END IF;  
          
        IF :OLD.FECHA_IMPLE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :OLD.ID, 'FECHA_IMPLE', TO_CHAR(:OLD.FECHA_IMPLE, 'DD/MM/YYYY HH24:MI:SS'), NULL);  
        END IF;  
          
        IF :OLD.ALTURA_U IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :OLD.ID, 'ALTURA_U', TO_CHAR(:OLD.ALTURA_U), NULL);  
        END IF;  
          
        IF :OLD.POSICION IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :OLD.ID, 'POSICION', :OLD.POSICION, NULL);  
        END IF;  
          
        IF :OLD.SITIO_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_EQUIPOS', 'ID', :OLD.ID, 'SITIO_ID', TO_CHAR(:OLD.SITIO_ID), NULL);  
        END IF;  
    END IF;   
  
EXCEPTION  
    WHEN OTHERS THEN  
          
        NULL;  
END TRG_AUDIT_SGT_EQUIPOS;
/
ALTER TRIGGER "TRG_AUDIT_SGT_EQUIPOS" ENABLE;

  ALTER TABLE "SGT_INTERFACES" ADD CONSTRAINT "INTERFACES_CON_EQUIPOS_CHK" FOREIGN KEY ("EQUIPO_ID")
	  REFERENCES "SGT_EQUIPOS" ("ID") ENABLE;
  ALTER TABLE "SGT_INTERFACES" ADD CONSTRAINT "INTERFACES_CON_TIPO_INTERFAZ_CHK" FOREIGN KEY ("TIPO_INTERFACE_ID")
	  REFERENCES "SGT_TIPO_INTERFAZ" ("ID") ENABLE;

  CREATE OR REPLACE EDITIONABLE TRIGGER "INTERFACES_ST_TRG" 
BEFORE INSERT OR UPDATE ON "SGT_INTERFACES" 
FOR EACH ROW 
BEGIN 
    IF INSERTING THEN 
        :NEW.creado_el := SYSDATE; 
        :NEW.creado_por := nvl(wwv_flow.g_user,user); 
        :NEW.actualizado_el := SYSDATE; 
        :NEW.ACTUALIZADO_POR := nvl(wwv_flow.g_user,user); 
    ELSIF UPDATING THEN 
        :NEW.actualizado_el := SYSDATE; 
        :NEW.ACTUALIZADO_POR := nvl(wwv_flow.g_user,user); 
    END IF; 
END;
/
ALTER TRIGGER "INTERFACES_ST_TRG" ENABLE;
  CREATE OR REPLACE EDITIONABLE TRIGGER "TRG_AUDIT_SGT_INTERFACES" 
    AFTER INSERT OR UPDATE OR DELETE ON SGT_INTERFACES  
    FOR EACH ROW  
DECLARE  
    v_audit_id NUMBER;  
    v_pk_value VARCHAR2(100);  
    v_action_type VARCHAR2(10);  
BEGIN  
  
    IF INSERTING THEN  
        v_action_type := 'INSERT';  
        v_pk_value := TO_CHAR(:NEW.ID);  
    ELSIF UPDATING THEN  
        v_action_type := 'UPDATE';  
        v_pk_value := TO_CHAR(:NEW.ID);  
    ELSIF DELETING THEN  
        v_action_type := 'DELETE';  
        v_pk_value := TO_CHAR(:OLD.ID);  
    END IF;  
  
  
    v_audit_id := AUDIT_PKG.START_AUDIT(  
        p_table_name => 'SGT_INTERFACES',  
        p_action => v_action_type  
    );  
  
  
    IF INSERTING THEN  
  
        IF :NEW.EQUIPO_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'EQUIPO_ID', NULL, TO_CHAR(:NEW.EQUIPO_ID));  
        END IF;  
          
        IF :NEW.NOMBRE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'NOMBRE', NULL, :NEW.NOMBRE);  
        END IF;  
          
        IF :NEW.ETIQUETA IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'ETIQUETA', NULL, :NEW.ETIQUETA);  
        END IF;  
          
        IF :NEW.ESTADO IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'ESTADO', NULL, :NEW.ESTADO);  
        END IF;  
          
        IF :NEW.MODO IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'MODO', NULL, :NEW.MODO);  
        END IF;  
          
        IF :NEW.DUPLEX IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'DUPLEX', NULL, :NEW.DUPLEX);  
        END IF;  
          
        IF :NEW.TIPO_INTERFACE_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'TIPO_INTERFACE_ID', NULL, TO_CHAR(:NEW.TIPO_INTERFACE_ID));  
        END IF;  
          
        IF :NEW.TX_EN_DBM IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'TX_EN_DBM', NULL, :NEW.TX_EN_DBM);  
        END IF;  
          
        IF :NEW.RX_EN_DBM IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'RX_EN_DBM', NULL, :NEW.RX_EN_DBM);  
        END IF;  
          
        IF :NEW.MAC_ADDRESS IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'MAC_ADDRESS', NULL, :NEW.MAC_ADDRESS);  
        END IF;  
          
        IF :NEW.NUMERO_SERIE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'NUMERO_SERIE', NULL, :NEW.NUMERO_SERIE);  
        END IF;  
          
        IF :NEW.HW_VERSION IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'HW_VERSION', NULL, :NEW.HW_VERSION);  
        END IF;  
          
        IF :NEW.SW_VERSION IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'SW_VERSION', NULL, :NEW.SW_VERSION);  
        END IF;  
  
    ELSIF UPDATING THEN  
  
        IF NVL(:OLD.EQUIPO_ID, -1) != NVL(:NEW.EQUIPO_ID, -1) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'EQUIPO_ID', TO_CHAR(:OLD.EQUIPO_ID), TO_CHAR(:NEW.EQUIPO_ID));  
        END IF;  
          
        IF NVL(:OLD.NOMBRE, 'NULL') != NVL(:NEW.NOMBRE, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'NOMBRE', :OLD.NOMBRE, :NEW.NOMBRE);  
        END IF;  
          
        IF NVL(:OLD.ETIQUETA, 'NULL') != NVL(:NEW.ETIQUETA, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'ETIQUETA', :OLD.ETIQUETA, :NEW.ETIQUETA);  
        END IF;  
          
        IF NVL(:OLD.ESTADO, 'NULL') != NVL(:NEW.ESTADO, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'ESTADO', :OLD.ESTADO, :NEW.ESTADO);  
        END IF;  
          
        IF NVL(:OLD.MODO, 'NULL') != NVL(:NEW.MODO, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'MODO', :OLD.MODO, :NEW.MODO);  
        END IF;  
          
        IF NVL(:OLD.DUPLEX, 'NULL') != NVL(:NEW.DUPLEX, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'DUPLEX', :OLD.DUPLEX, :NEW.DUPLEX);  
        END IF;  
          
        IF NVL(:OLD.TIPO_INTERFACE_ID, -1) != NVL(:NEW.TIPO_INTERFACE_ID, -1) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'TIPO_INTERFACE_ID', TO_CHAR(:OLD.TIPO_INTERFACE_ID), TO_CHAR(:NEW.TIPO_INTERFACE_ID));  
        END IF;  
          
        IF NVL(:OLD.TX_EN_DBM, 'NULL') != NVL(:NEW.TX_EN_DBM, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'TX_EN_DBM', :OLD.TX_EN_DBM, :NEW.TX_EN_DBM);  
        END IF;  
          
        IF NVL(:OLD.RX_EN_DBM, 'NULL') != NVL(:NEW.RX_EN_DBM, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'RX_EN_DBM', :OLD.RX_EN_DBM, :NEW.RX_EN_DBM);  
        END IF;  
          
        IF NVL(:OLD.MAC_ADDRESS, 'NULL') != NVL(:NEW.MAC_ADDRESS, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'MAC_ADDRESS', :OLD.MAC_ADDRESS, :NEW.MAC_ADDRESS);  
        END IF;  
          
        IF NVL(:OLD.NUMERO_SERIE, 'NULL') != NVL(:NEW.NUMERO_SERIE, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'NUMERO_SERIE', :OLD.NUMERO_SERIE, :NEW.NUMERO_SERIE);  
        END IF;  
          
        IF NVL(:OLD.HW_VERSION, 'NULL') != NVL(:NEW.HW_VERSION, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'HW_VERSION', :OLD.HW_VERSION, :NEW.HW_VERSION);  
        END IF;  
          
        IF NVL(:OLD.SW_VERSION, 'NULL') != NVL(:NEW.SW_VERSION, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'SW_VERSION', :OLD.SW_VERSION, :NEW.SW_VERSION);  
        END IF;  
  
    ELSIF DELETING THEN  
  
        IF :OLD.EQUIPO_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'EQUIPO_ID', TO_CHAR(:OLD.EQUIPO_ID), NULL);  
        END IF;  
          
        IF :OLD.NOMBRE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'NOMBRE', :OLD.NOMBRE, NULL);  
        END IF;  
          
        IF :OLD.ETIQUETA IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'ETIQUETA', :OLD.ETIQUETA, NULL);  
        END IF;  
          
        IF :OLD.ESTADO IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'ESTADO', :OLD.ESTADO, NULL);  
        END IF;  
          
        IF :OLD.MODO IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'MODO', :OLD.MODO, NULL);  
        END IF;  
          
        IF :OLD.DUPLEX IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'DUPLEX', :OLD.DUPLEX, NULL);  
        END IF;  
          
        IF :OLD.TIPO_INTERFACE_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'TIPO_INTERFACE_ID', TO_CHAR(:OLD.TIPO_INTERFACE_ID), NULL);  
        END IF;  
          
        IF :OLD.TX_EN_DBM IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'TX_EN_DBM', :OLD.TX_EN_DBM, NULL);  
        END IF;  
          
        IF :OLD.RX_EN_DBM IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'RX_EN_DBM', :OLD.RX_EN_DBM, NULL);  
        END IF;  
          
        IF :OLD.MAC_ADDRESS IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'MAC_ADDRESS', :OLD.MAC_ADDRESS, NULL);  
        END IF;  
          
        IF :OLD.NUMERO_SERIE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'NUMERO_SERIE', :OLD.NUMERO_SERIE, NULL);  
        END IF;  
          
        IF :OLD.HW_VERSION IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'HW_VERSION', :OLD.HW_VERSION, NULL);  
        END IF;  
          
        IF :OLD.SW_VERSION IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_INTERFACES', 'ID', v_pk_value, 'SW_VERSION', :OLD.SW_VERSION, NULL);  
        END IF;  
    END IF;  
  
EXCEPTION  
    WHEN OTHERS THEN  
         
        NULL;   
END TRG_AUDIT_SGT_INTERFACES;
/
ALTER TRIGGER "TRG_AUDIT_SGT_INTERFACES" ENABLE;

  ALTER TABLE "SGT_RACKS" ADD CONSTRAINT "FK_REGISTROS_RACKS" FOREIGN KEY ("SALA_ID")
	  REFERENCES "SGT_SALAS" ("ID") ENABLE;

  CREATE OR REPLACE EDITIONABLE TRIGGER "TRG_AUDIT_SGT_RACKS" 
AFTER INSERT OR UPDATE OR DELETE ON SGT_RACKS  
FOR EACH ROW  
DECLARE  
    v_audit_id NUMBER;  
BEGIN  
    -- INSERT  
    IF INSERTING THEN  
        v_audit_id := AUDIT_PKG.START_AUDIT('SGT_RACKS', 'INSERT');  
          
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_RACKS', 'ID', :NEW.ID, 'ID', NULL, :NEW.ID);  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_RACKS', 'ID', :NEW.ID, 'SALA_ID', NULL, :NEW.SALA_ID);  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_RACKS', 'ID', :NEW.ID, 'NOMBRE', NULL, :NEW.NOMBRE);  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_RACKS', 'ID', :NEW.ID, 'DETALLE', NULL, :NEW.DETALLE);  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_RACKS', 'ID', :NEW.ID, 'UNIDAD_ENCARGADA', NULL, :NEW.UNIDAD_ENCARGADA);  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_RACKS', 'ID', :NEW.ID, 'MARCA', NULL, :NEW.MARCA);  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_RACKS', 'ID', :NEW.ID, 'MODELO', NULL, :NEW.MODELO);  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_RACKS', 'ID', :NEW.ID, 'DIMENSIONES', NULL, :NEW.DIMENSIONES);  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_RACKS', 'ID', :NEW.ID, 'ALTURA_U', NULL, :NEW.ALTURA_U);  
    END IF;  
      
    -- UPDATE  
    IF UPDATING THEN  
        v_audit_id := AUDIT_PKG.START_AUDIT('SGT_RACKS', 'UPDATE');  
          
  
        IF NVL(:OLD.SALA_ID, -99999) != NVL(:NEW.SALA_ID, -99999) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_RACKS', 'ID', :NEW.ID, 'SALA_ID', :OLD.SALA_ID, :NEW.SALA_ID);  
        END IF;  
          
        IF NVL(:OLD.NOMBRE, 'NULL') != NVL(:NEW.NOMBRE, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_RACKS', 'ID', :NEW.ID, 'NOMBRE', :OLD.NOMBRE, :NEW.NOMBRE);  
        END IF;  
          
        IF NVL(:OLD.DETALLE, 'NULL') != NVL(:NEW.DETALLE, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_RACKS', 'ID', :NEW.ID, 'DETALLE', :OLD.DETALLE, :NEW.DETALLE);  
        END IF;  
          
        IF NVL(:OLD.UNIDAD_ENCARGADA, 'NULL') != NVL(:NEW.UNIDAD_ENCARGADA, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_RACKS', 'ID', :NEW.ID, 'UNIDAD_ENCARGADA', :OLD.UNIDAD_ENCARGADA, :NEW.UNIDAD_ENCARGADA);  
        END IF;  
          
        IF NVL(:OLD.MARCA, 'NULL') != NVL(:NEW.MARCA, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_RACKS', 'ID', :NEW.ID, 'MARCA', :OLD.MARCA, :NEW.MARCA);  
        END IF;  
          
        IF NVL(:OLD.MODELO, 'NULL') != NVL(:NEW.MODELO, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_RACKS', 'ID', :NEW.ID, 'MODELO', :OLD.MODELO, :NEW.MODELO);  
        END IF;  
          
        IF NVL(:OLD.DIMENSIONES, 'NULL') != NVL(:NEW.DIMENSIONES, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_RACKS', 'ID', :NEW.ID, 'DIMENSIONES', :OLD.DIMENSIONES, :NEW.DIMENSIONES);  
        END IF;  
          
        IF NVL(:OLD.ALTURA_U, 'NULL') != NVL(:NEW.ALTURA_U, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_RACKS', 'ID', :NEW.ID, 'ALTURA_U', :OLD.ALTURA_U, :NEW.ALTURA_U);  
        END IF;  
    END IF;  
      
    -- DELETE  
    IF DELETING THEN  
        v_audit_id := AUDIT_PKG.START_AUDIT('SGT_RACKS', 'DELETE');  
          
  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_RACKS', 'ID', :OLD.ID, 'ID', :OLD.ID, NULL);  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_RACKS', 'ID', :OLD.ID, 'SALA_ID', :OLD.SALA_ID, NULL);  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_RACKS', 'ID', :OLD.ID, 'NOMBRE', :OLD.NOMBRE, NULL);  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_RACKS', 'ID', :OLD.ID, 'DETALLE', :OLD.DETALLE, NULL);  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_RACKS', 'ID', :OLD.ID, 'UNIDAD_ENCARGADA', :OLD.UNIDAD_ENCARGADA, NULL);  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_RACKS', 'ID', :OLD.ID, 'MARCA', :OLD.MARCA, NULL);  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_RACKS', 'ID', :OLD.ID, 'MODELO', :OLD.MODELO, NULL);  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_RACKS', 'ID', :OLD.ID, 'DIMENSIONES', :OLD.DIMENSIONES, NULL);  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_RACKS', 'ID', :OLD.ID, 'ALTURA_U', :OLD.ALTURA_U, NULL);  
    END IF;  
      
EXCEPTION  
    WHEN OTHERS THEN  
          
        NULL;  
END;
/
ALTER TRIGGER "TRG_AUDIT_SGT_RACKS" ENABLE;

  ALTER TABLE "SGT_SALAS" ADD CONSTRAINT "SGT_SALAS_CON" FOREIGN KEY ("SITIO_ID")
	  REFERENCES "SGT_SITIOS" ("ID") ENABLE;

  CREATE OR REPLACE EDITIONABLE TRIGGER "TRG_AUDIT_SGT_SALAS" 
    AFTER INSERT OR UPDATE OR DELETE ON SGT_SALAS  
    FOR EACH ROW  
DECLARE  
    v_audit_id NUMBER;  
    v_pk_value VARCHAR2(100);  
    v_action_type VARCHAR2(10);  
BEGIN  
  
    IF INSERTING THEN  
        v_action_type := 'INSERT';  
        v_pk_value := TO_CHAR(:NEW.ID);  
    ELSIF UPDATING THEN  
        v_action_type := 'UPDATE';  
        v_pk_value := TO_CHAR(:NEW.ID);  
    ELSIF DELETING THEN  
        v_action_type := 'DELETE';  
        v_pk_value := TO_CHAR(:OLD.ID);  
    END IF;  
  
  
    v_audit_id := AUDIT_PKG.START_AUDIT(  
        p_table_name => 'SGT_SALAS',  
        p_action => v_action_type  
    );  
  
  
    IF INSERTING THEN  
  
        IF :NEW.SITIO_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SALAS', 'ID', v_pk_value, 'SITIO_ID', NULL, TO_CHAR(:NEW.SITIO_ID));  
        END IF;  
          
        IF :NEW.SIGLAS IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SALAS', 'ID', v_pk_value, 'SIGLAS', NULL, :NEW.SIGLAS);  
        END IF;  
          
        IF :NEW.NOMBRE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SALAS', 'ID', v_pk_value, 'NOMBRE', NULL, :NEW.NOMBRE);  
        END IF;  
  
    ELSIF UPDATING THEN  
  
        IF NVL(:OLD.SITIO_ID, -1) != NVL(:NEW.SITIO_ID, -1) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SALAS', 'ID', v_pk_value, 'SITIO_ID', TO_CHAR(:OLD.SITIO_ID), TO_CHAR(:NEW.SITIO_ID));  
        END IF;  
          
        IF NVL(:OLD.SIGLAS, 'NULL') != NVL(:NEW.SIGLAS, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SALAS', 'ID', v_pk_value, 'SIGLAS', :OLD.SIGLAS, :NEW.SIGLAS);  
        END IF;  
          
        IF NVL(:OLD.NOMBRE, 'NULL') != NVL(:NEW.NOMBRE, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SALAS', 'ID', v_pk_value, 'NOMBRE', :OLD.NOMBRE, :NEW.NOMBRE);  
        END IF;  
  
    ELSIF DELETING THEN  
  
        IF :OLD.SITIO_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SALAS', 'ID', v_pk_value, 'SITIO_ID', TO_CHAR(:OLD.SITIO_ID), NULL);  
        END IF;  
          
        IF :OLD.SIGLAS IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SALAS', 'ID', v_pk_value, 'SIGLAS', :OLD.SIGLAS, NULL);  
        END IF;  
          
        IF :OLD.NOMBRE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SALAS', 'ID', v_pk_value, 'NOMBRE', :OLD.NOMBRE, NULL);  
        END IF;  
    END IF;  
  
EXCEPTION  
    WHEN OTHERS THEN  
  
        NULL;   
END TRG_AUDIT_SGT_SALAS;
/
ALTER TRIGGER "TRG_AUDIT_SGT_SALAS" ENABLE;

  CREATE OR REPLACE EDITIONABLE TRIGGER "SERVICIOS_ST_TRG" 
before 
insert or update  on "SGT_SERVICIOS" 
for each row 
begin 
    --actualizar info de  
    IF INSERTING THEN 
        :NEW.creado_el := SYSDATE; 
        :NEW.creado_por := nvl(wwv_flow.g_user,user); 
        :NEW.actualizado_el := SYSDATE; 
        :NEW.ACTUALIZADO_POR := nvl(wwv_flow.g_user,user); 
    ELSIF UPDATING THEN 
        :NEW.actualizado_el := SYSDATE; 
        :NEW.ACTUALIZADO_POR := nvl(wwv_flow.g_user,user); 
    END IF; 
end;
/
ALTER TRIGGER "SERVICIOS_ST_TRG" ENABLE;
  CREATE OR REPLACE EDITIONABLE TRIGGER "TRG_AUDIT_SGT_SERVICIOS" 
AFTER INSERT OR UPDATE OR DELETE ON SGT_SERVICIOS  
FOR EACH ROW  
DECLARE  
    v_audit_id NUMBER;  
BEGIN  
    -- INSERT  
    IF INSERTING THEN  
        v_audit_id := AUDIT_PKG.START_AUDIT('SGT_SERVICIOS', 'INSERT');  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SERVICIOS', 'ID', :NEW.ID, 'ID', NULL, :NEW.ID);  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SERVICIOS', 'ID', :NEW.ID, 'NOMBRE', NULL, :NEW.NOMBRE);  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SERVICIOS', 'ID', :NEW.ID, 'NIVEL_DE_PRIORIDAD', NULL, :NEW.NIVEL_DE_PRIORIDAD);  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SERVICIOS', 'ID', :NEW.ID, 'DESCRIPCION', NULL, :NEW.DESCRIPCION);  
    END IF;  
      
    -- UPDATE  
    IF UPDATING THEN  
        v_audit_id := AUDIT_PKG.START_AUDIT('SGT_SERVICIOS', 'UPDATE');  
          
  
        IF NVL(:OLD.NOMBRE, 'NULL') != NVL(:NEW.NOMBRE, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SERVICIOS', 'ID', :NEW.ID, 'NOMBRE', :OLD.NOMBRE, :NEW.NOMBRE);  
        END IF;  
          
        IF NVL(:OLD.NIVEL_DE_PRIORIDAD, -99999) != NVL(:NEW.NIVEL_DE_PRIORIDAD, -99999) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SERVICIOS', 'ID', :NEW.ID, 'NIVEL_DE_PRIORIDAD', :OLD.NIVEL_DE_PRIORIDAD, :NEW.NIVEL_DE_PRIORIDAD);  
        END IF;  
          
        IF NVL(:OLD.DESCRIPCION, 'NULL') != NVL(:NEW.DESCRIPCION, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SERVICIOS', 'ID', :NEW.ID, 'DESCRIPCION', :OLD.DESCRIPCION, :NEW.DESCRIPCION);  
        END IF;  
    END IF;  
      
    -- DELETE  
    IF DELETING THEN  
        v_audit_id := AUDIT_PKG.START_AUDIT('SGT_SERVICIOS', 'DELETE');  
          
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SERVICIOS', 'ID', :OLD.ID, 'ID', :OLD.ID, NULL);  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SERVICIOS', 'ID', :OLD.ID, 'NOMBRE', :OLD.NOMBRE, NULL);  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SERVICIOS', 'ID', :OLD.ID, 'NIVEL_DE_PRIORIDAD', :OLD.NIVEL_DE_PRIORIDAD, NULL);  
    AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SERVICIOS', 'ID', :OLD.ID, 'DESCRIPCION', :OLD.DESCRIPCION, NULL);  
    END IF;  
      
EXCEPTION  
    WHEN OTHERS THEN  
  
        NULL;  
END;
/
ALTER TRIGGER "TRG_AUDIT_SGT_SERVICIOS" ENABLE;

  ALTER TABLE "SGT_SITIOS" ADD CONSTRAINT "FK_SITIOS_ZONAS" FOREIGN KEY ("ZONA_ID")
	  REFERENCES "SGT_ZONAS" ("ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE "SGT_SITIOS" ADD CONSTRAINT "SGT_SITIOS_CON" FOREIGN KEY ("CIUDAD_ID")
	  REFERENCES "SGT_CIUDAD" ("ID") ENABLE;

  CREATE OR REPLACE EDITIONABLE TRIGGER "TRG_AUDIT_SGT_SITIOS" 
AFTER INSERT OR UPDATE OR DELETE ON SGT_SITIOS  
FOR EACH ROW  
DECLARE  
    v_action VARCHAR2(10);  
    v_audit_id NUMBER;  
BEGIN  
    -- Determinar tipo de operación  
    IF INSERTING THEN  
        v_action := 'INSERT';  
    ELSIF UPDATING THEN  
        v_action := 'UPDATE';  
    ELSIF DELETING THEN  
        v_action := 'DELETE';  
    END IF;  
      
  
    v_audit_id := AUDIT_PKG.START_AUDIT('SGT_SITIOS', v_action);  
      
  
    IF INSERTING THEN  
        -- Campos obligatorios  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS', 'ID', :NEW.ID, 'SIGLAS', NULL, :NEW.SIGLAS);  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS', 'ID', :NEW.ID, 'NOMBRE', NULL, :NEW.NOMBRE);  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS', 'ID', :NEW.ID, 'TIPO_DE_SITIO', NULL, :NEW.TIPO_DE_SITIO);  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS', 'ID', :NEW.ID, 'PROPIETARIO', NULL, :NEW.PROPIETARIO);  
          
        -- Campos que pueden ser nulos  
        IF :NEW.ZONA_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS', 'ID', :NEW.ID, 'ZONA_ID', NULL, TO_CHAR(:NEW.ZONA_ID));  
        END IF;  
          
        IF :NEW.CIUDAD_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS', 'ID', :NEW.ID, 'CIUDAD_ID', NULL, TO_CHAR(:NEW.CIUDAD_ID));  
        END IF;  
          
        IF :NEW.LATITUD IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS', 'ID', :NEW.ID, 'LATITUD', NULL, :NEW.LATITUD);  
        END IF;  
          
        IF :NEW.LONGITUD IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS', 'ID', :NEW.ID, 'LONGITUD', NULL, :NEW.LONGITUD);  
        END IF;  
          
        IF :NEW.UBICACIÓN IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS', 'ID', :NEW.ID, 'UBICACIÓN', NULL, :NEW.UBICACIÓN);  
        END IF;  
          
        IF :NEW.OBSERVACION IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS', 'ID', :NEW.ID, 'OBSERVACION', NULL, :NEW.OBSERVACION);  
        END IF;  
      
  
    ELSIF UPDATING THEN  
        -- Campos obligatorios  
        IF :OLD.SIGLAS != :NEW.SIGLAS OR   
           (:OLD.SIGLAS IS NULL AND :NEW.SIGLAS IS NOT NULL) OR  
           (:OLD.SIGLAS IS NOT NULL AND :NEW.SIGLAS IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS', 'ID', :NEW.ID, 'SIGLAS', :OLD.SIGLAS, :NEW.SIGLAS);  
        END IF;  
          
  
        IF :OLD.NOMBRE != :NEW.NOMBRE OR   
           (:OLD.NOMBRE IS NULL AND :NEW.NOMBRE IS NOT NULL) OR  
           (:OLD.NOMBRE IS NOT NULL AND :NEW.NOMBRE IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS', 'ID', :NEW.ID, 'NOMBRE', :OLD.NOMBRE, :NEW.NOMBRE);  
        END IF;  
          
        -- TIPO_DE_SITIO  
        IF :OLD.TIPO_DE_SITIO != :NEW.TIPO_DE_SITIO OR   
           (:OLD.TIPO_DE_SITIO IS NULL AND :NEW.TIPO_DE_SITIO IS NOT NULL) OR  
           (:OLD.TIPO_DE_SITIO IS NOT NULL AND :NEW.TIPO_DE_SITIO IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS', 'ID', :NEW.ID, 'TIPO_DE_SITIO', :OLD.TIPO_DE_SITIO, :NEW.TIPO_DE_SITIO);  
        END IF;  
          
        -- PROPIETARIO  
        IF :OLD.PROPIETARIO != :NEW.PROPIETARIO OR   
           (:OLD.PROPIETARIO IS NULL AND :NEW.PROPIETARIO IS NOT NULL) OR  
           (:OLD.PROPIETARIO IS NOT NULL AND :NEW.PROPIETARIO IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS', 'ID', :NEW.ID, 'PROPIETARIO', :OLD.PROPIETARIO, :NEW.PROPIETARIO);  
        END IF;  
          
        -- ZONA_ID (campo numérico)  
        IF :OLD.ZONA_ID != :NEW.ZONA_ID OR   
           (:OLD.ZONA_ID IS NULL AND :NEW.ZONA_ID IS NOT NULL) OR  
           (:OLD.ZONA_ID IS NOT NULL AND :NEW.ZONA_ID IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS', 'ID', :NEW.ID, 'ZONA_ID',   
                                 TO_CHAR(:OLD.ZONA_ID), TO_CHAR(:NEW.ZONA_ID));  
        END IF;  
          
        -- CIUDAD_ID (campo numérico)  
        IF :OLD.CIUDAD_ID != :NEW.CIUDAD_ID OR   
           (:OLD.CIUDAD_ID IS NULL AND :NEW.CIUDAD_ID IS NOT NULL) OR  
           (:OLD.CIUDAD_ID IS NOT NULL AND :NEW.CIUDAD_ID IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS', 'ID', :NEW.ID, 'CIUDAD_ID',   
                                 TO_CHAR(:OLD.CIUDAD_ID), TO_CHAR(:NEW.CIUDAD_ID));  
        END IF;  
          
        -- LATITUD  
        IF :OLD.LATITUD != :NEW.LATITUD OR   
           (:OLD.LATITUD IS NULL AND :NEW.LATITUD IS NOT NULL) OR  
           (:OLD.LATITUD IS NOT NULL AND :NEW.LATITUD IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS', 'ID', :NEW.ID, 'LATITUD', :OLD.LATITUD, :NEW.LATITUD);  
        END IF;  
          
        -- LONGITUD  
        IF :OLD.LONGITUD != :NEW.LONGITUD OR   
           (:OLD.LONGITUD IS NULL AND :NEW.LONGITUD IS NOT NULL) OR  
           (:OLD.LONGITUD IS NOT NULL AND :NEW.LONGITUD IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS', 'ID', :NEW.ID, 'LONGITUD', :OLD.LONGITUD, :NEW.LONGITUD);  
        END IF;  
          
        -- UBICACIÓN  
        IF :OLD.UBICACIÓN != :NEW.UBICACIÓN OR   
           (:OLD.UBICACIÓN IS NULL AND :NEW.UBICACIÓN IS NOT NULL) OR  
           (:OLD.UBICACIÓN IS NOT NULL AND :NEW.UBICACIÓN IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS', 'ID', :NEW.ID, 'UBICACIÓN', :OLD.UBICACIÓN, :NEW.UBICACIÓN);  
        END IF;  
          
        -- OBSERVACION  
        IF :OLD.OBSERVACION != :NEW.OBSERVACION OR   
           (:OLD.OBSERVACION IS NULL AND :NEW.OBSERVACION IS NOT NULL) OR  
           (:OLD.OBSERVACION IS NOT NULL AND :NEW.OBSERVACION IS NULL) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS', 'ID', :NEW.ID, 'OBSERVACION', :OLD.OBSERVACION, :NEW.OBSERVACION);  
        END IF;  
      
    -- Para eliminaciones - registramos los valores que se están eliminando  
    ELSIF DELETING THEN  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS', 'ID', :OLD.ID, 'SIGLAS', :OLD.SIGLAS, NULL);  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS', 'ID', :OLD.ID, 'NOMBRE', :OLD.NOMBRE, NULL);  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS', 'ID', :OLD.ID, 'TIPO_DE_SITIO', :OLD.TIPO_DE_SITIO, NULL);  
        AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS', 'ID', :OLD.ID, 'PROPIETARIO', :OLD.PROPIETARIO, NULL);  
          
        -- Campos que pueden ser nulos  
        IF :OLD.ZONA_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS', 'ID', :OLD.ID, 'ZONA_ID', TO_CHAR(:OLD.ZONA_ID), NULL);  
        END IF;  
          
        IF :OLD.CIUDAD_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS', 'ID', :OLD.ID, 'CIUDAD_ID', TO_CHAR(:OLD.CIUDAD_ID), NULL);  
        END IF;  
          
        IF :OLD.LATITUD IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS', 'ID', :OLD.ID, 'LATITUD', :OLD.LATITUD, NULL);  
        END IF;  
          
        IF :OLD.LONGITUD IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS', 'ID', :OLD.ID, 'LONGITUD', :OLD.LONGITUD, NULL);  
        END IF;  
          
        IF :OLD.UBICACIÓN IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS', 'ID', :OLD.ID, 'UBICACIÓN', :OLD.UBICACIÓN, NULL);  
        END IF;  
          
        IF :OLD.OBSERVACION IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS', 'ID', :OLD.ID, 'OBSERVACION', :OLD.OBSERVACION, NULL);  
        END IF;  
    END IF;  
END;
/
ALTER TRIGGER "TRG_AUDIT_SGT_SITIOS" ENABLE;

  ALTER TABLE "SGT_SITIOS_ENLACE_WAN" ADD CONSTRAINT "ENLACE_WAN_FK_CK" FOREIGN KEY ("ENLACE_WAN_ID")
	  REFERENCES "SGT_ENLACES_WAN" ("ID") ENABLE;
  ALTER TABLE "SGT_SITIOS_ENLACE_WAN" ADD CONSTRAINT "SITIOS_ID_FK" FOREIGN KEY ("SITIO_ID")
	  REFERENCES "SGT_SITIOS" ("ID") ENABLE;

  CREATE INDEX "SGT_SITIOS_ENLACE_WAN_I1" ON "SGT_SITIOS_ENLACE_WAN" ("SITIO_ID") 
  ;

  CREATE INDEX "SGT_SITIOS_ENLACE_WAN_I2" ON "SGT_SITIOS_ENLACE_WAN" ("ENLACE_WAN_ID") 
  ;

  CREATE OR REPLACE EDITIONABLE TRIGGER "TRG_AUDIT_SGT_SITIOS_ENLACE_WAN" 
AFTER INSERT OR UPDATE OR DELETE ON SGT_SITIOS_ENLACE_WAN 
FOR EACH ROW 
DECLARE 
    v_action   VARCHAR2(10); 
    v_audit_id NUMBER; 
BEGIN 
    -- Determinar tipo de operación 
    IF INSERTING THEN 
        v_action := 'INSERT'; 
    ELSIF UPDATING THEN 
        v_action := 'UPDATE'; 
    ELSIF DELETING THEN 
        v_action := 'DELETE'; 
    END IF; 
 
    -- Iniciar auditoría 
    v_audit_id := AUDIT_PKG.START_AUDIT('SGT_SITIOS_ENLACE_WAN', v_action); 
 
    IF INSERTING THEN 
        -- Auditar columnas de negocio (omitir creado/modificado) 
        IF :NEW.SITIO_ID IS NOT NULL THEN 
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS_ENLACE_WAN', 'ID', :NEW.ID, 'SITIO_ID', NULL, TO_CHAR(:NEW.SITIO_ID)); 
        END IF; 
 
        IF :NEW.ENLACE_WAN_ID IS NOT NULL THEN 
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS_ENLACE_WAN', 'ID', :NEW.ID, 'ENLACE_WAN_ID', NULL, TO_CHAR(:NEW.ENLACE_WAN_ID)); 
        END IF; 
 
        IF :NEW.SEQ IS NOT NULL THEN 
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS_ENLACE_WAN', 'ID', :NEW.ID, 'SEQ', NULL, TO_CHAR(:NEW.SEQ)); 
        END IF; 
 
    ELSIF UPDATING THEN 
        -- SITIO_ID 
        IF :OLD.SITIO_ID != :NEW.SITIO_ID OR 
           (:OLD.SITIO_ID IS NULL AND :NEW.SITIO_ID IS NOT NULL) OR 
           (:OLD.SITIO_ID IS NOT NULL AND :NEW.SITIO_ID IS NULL) THEN 
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS_ENLACE_WAN', 'ID', :NEW.ID, 'SITIO_ID', TO_CHAR(:OLD.SITIO_ID), TO_CHAR(:NEW.SITIO_ID)); 
        END IF; 
 
        -- ENLACE_WAN_ID 
        IF :OLD.ENLACE_WAN_ID != :NEW.ENLACE_WAN_ID OR 
           (:OLD.ENLACE_WAN_ID IS NULL AND :NEW.ENLACE_WAN_ID IS NOT NULL) OR 
           (:OLD.ENLACE_WAN_ID IS NOT NULL AND :NEW.ENLACE_WAN_ID IS NULL) THEN 
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS_ENLACE_WAN', 'ID', :NEW.ID, 'ENLACE_WAN_ID', TO_CHAR(:OLD.ENLACE_WAN_ID), TO_CHAR(:NEW.ENLACE_WAN_ID)); 
        END IF; 
 
        -- SEQ 
        IF :OLD.SEQ != :NEW.SEQ OR 
           (:OLD.SEQ IS NULL AND :NEW.SEQ IS NOT NULL) OR 
           (:OLD.SEQ IS NOT NULL AND :NEW.SEQ IS NULL) THEN 
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS_ENLACE_WAN', 'ID', :NEW.ID, 'SEQ', TO_CHAR(:OLD.SEQ), TO_CHAR(:NEW.SEQ)); 
        END IF; 
 
    ELSIF DELETING THEN 
        -- Registrar los valores eliminados 
        IF :OLD.SITIO_ID IS NOT NULL THEN 
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS_ENLACE_WAN', 'ID', :OLD.ID, 'SITIO_ID', TO_CHAR(:OLD.SITIO_ID), NULL); 
        END IF; 
 
        IF :OLD.ENLACE_WAN_ID IS NOT NULL THEN 
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS_ENLACE_WAN', 'ID', :OLD.ID, 'ENLACE_WAN_ID', TO_CHAR(:OLD.ENLACE_WAN_ID), NULL); 
        END IF; 
 
        IF :OLD.SEQ IS NOT NULL THEN 
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS_ENLACE_WAN', 'ID', :OLD.ID, 'SEQ', TO_CHAR(:OLD.SEQ), NULL); 
        END IF; 
    END IF; 
END;
/
ALTER TRIGGER "TRG_AUDIT_SGT_SITIOS_ENLACE_WAN" ENABLE;

  ALTER TABLE "SGT_SITIOS_SERVICIO" ADD CONSTRAINT "SGT_SITIOS_SERVICIO_FK" FOREIGN KEY ("SERVICIO_ID")
	  REFERENCES "SGT_SERVICIOS" ("ID") ENABLE;
  ALTER TABLE "SGT_SITIOS_SERVICIO" ADD CONSTRAINT "SGT_SITIOS_SERVICIO_SITIO_ID_FK" FOREIGN KEY ("SITIO_ID")
	  REFERENCES "SGT_SITIOS" ("ID") ENABLE;

  CREATE INDEX "SGT_SITIOS_SERVICIO_I1" ON "SGT_SITIOS_SERVICIO" ("SITIO_ID") 
  ;

  CREATE INDEX "SGT_SITIOS_SERVICIO_I2" ON "SGT_SITIOS_SERVICIO" ("SERVICIO_ID") 
  ;

  CREATE OR REPLACE EDITIONABLE TRIGGER "TRG_AUDIT_SGT_SITIOS_SERVICIO" 
AFTER INSERT OR UPDATE OR DELETE ON SGT_SITIOS_SERVICIO 
FOR EACH ROW 
DECLARE 
    v_action   VARCHAR2(10); 
    v_audit_id NUMBER; 
BEGIN 
    -- Determinar tipo de operación 
    IF INSERTING THEN 
        v_action := 'INSERT'; 
    ELSIF UPDATING THEN 
        v_action := 'UPDATE'; 
    ELSIF DELETING THEN 
        v_action := 'DELETE'; 
    END IF; 
 
    -- Iniciar auditoría 
    v_audit_id := AUDIT_PKG.START_AUDIT('SGT_SITIOS_SERVICIO', v_action); 
 
    IF INSERTING THEN 
        -- Auditar columnas de negocio (omitir creado/modificado) 
        IF :NEW.SITIO_ID IS NOT NULL THEN 
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS_SERVICIO', 'ID', :NEW.ID, 'SITIO_ID', NULL, TO_CHAR(:NEW.SITIO_ID)); 
        END IF; 
 
        IF :NEW.SERVICIO_ID IS NOT NULL THEN 
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS_SERVICIO', 'ID', :NEW.ID, 'SERVICIO_ID', NULL, TO_CHAR(:NEW.SERVICIO_ID)); 
        END IF; 
 
        IF :NEW.SEQ IS NOT NULL THEN 
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS_SERVICIO', 'ID', :NEW.ID, 'SEQ', NULL, TO_CHAR(:NEW.SEQ)); 
        END IF; 
 
    ELSIF UPDATING THEN 
        -- SITIO_ID 
        IF :OLD.SITIO_ID != :NEW.SITIO_ID OR 
           (:OLD.SITIO_ID IS NULL AND :NEW.SITIO_ID IS NOT NULL) OR 
           (:OLD.SITIO_ID IS NOT NULL AND :NEW.SITIO_ID IS NULL) THEN 
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS_SERVICIO', 'ID', :NEW.ID, 'SITIO_ID', TO_CHAR(:OLD.SITIO_ID), TO_CHAR(:NEW.SITIO_ID)); 
        END IF; 
 
        -- SERVICIO_ID 
        IF :OLD.SERVICIO_ID != :NEW.SERVICIO_ID OR 
           (:OLD.SERVICIO_ID IS NULL AND :NEW.SERVICIO_ID IS NOT NULL) OR 
           (:OLD.SERVICIO_ID IS NOT NULL AND :NEW.SERVICIO_ID IS NULL) THEN 
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS_SERVICIO', 'ID', :NEW.ID, 'SERVICIO_ID', TO_CHAR(:OLD.SERVICIO_ID), TO_CHAR(:NEW.SERVICIO_ID)); 
        END IF; 
 
        -- SEQ 
        IF :OLD.SEQ != :NEW.SEQ OR 
           (:OLD.SEQ IS NULL AND :NEW.SEQ IS NOT NULL) OR 
           (:OLD.SEQ IS NOT NULL AND :NEW.SEQ IS NULL) THEN 
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS_SERVICIO', 'ID', :NEW.ID, 'SEQ', TO_CHAR(:OLD.SEQ), TO_CHAR(:NEW.SEQ)); 
        END IF; 
 
    ELSIF DELETING THEN 
        -- Registrar los valores eliminados 
        IF :OLD.SITIO_ID IS NOT NULL THEN 
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS_SERVICIO', 'ID', :OLD.ID, 'SITIO_ID', TO_CHAR(:OLD.SITIO_ID), NULL); 
        END IF; 
 
        IF :OLD.SERVICIO_ID IS NOT NULL THEN 
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS_SERVICIO', 'ID', :OLD.ID, 'SERVICIO_ID', TO_CHAR(:OLD.SERVICIO_ID), NULL); 
        END IF; 
 
        IF :OLD.SEQ IS NOT NULL THEN 
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_SITIOS_SERVICIO', 'ID', :OLD.ID, 'SEQ', TO_CHAR(:OLD.SEQ), NULL); 
        END IF; 
    END IF; 
END;
/
ALTER TRIGGER "TRG_AUDIT_SGT_SITIOS_SERVICIO" ENABLE;

  CREATE OR REPLACE EDITIONABLE TRIGGER "TRG_AUDIT_SGT_TIPO_CABLE" 
    AFTER INSERT OR UPDATE OR DELETE ON SGT_TIPO_CABLE  
    FOR EACH ROW  
DECLARE  
    v_audit_id NUMBER;  
    v_pk_value VARCHAR2(100);  
    v_action_type VARCHAR2(10);  
BEGIN  
  
    IF INSERTING THEN  
        v_action_type := 'INSERT';  
        v_pk_value := TO_CHAR(:NEW.ID);  
    ELSIF UPDATING THEN  
        v_action_type := 'UPDATE';  
        v_pk_value := TO_CHAR(:NEW.ID);  
    ELSIF DELETING THEN  
        v_action_type := 'DELETE';  
        v_pk_value := TO_CHAR(:OLD.ID);  
    END IF;  
  
  
    v_audit_id := AUDIT_PKG.START_AUDIT(  
        p_table_name => 'SGT_TIPO_CABLE',  
        p_action => v_action_type  
    );  
  
  
    IF INSERTING THEN  
  
        IF :NEW.NOMBRE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_TIPO_CABLE', 'ID', v_pk_value, 'NOMBRE', NULL, :NEW.NOMBRE);  
        END IF;  
          
        IF :NEW.MOSTRAR IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_TIPO_CABLE', 'ID', v_pk_value, 'MOSTRAR', NULL, :NEW.MOSTRAR);  
        END IF;  
          
        IF :NEW.GRUPO_CABLES IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_TIPO_CABLE', 'ID', v_pk_value, 'GRUPO_CABLES', NULL, :NEW.GRUPO_CABLES);  
        END IF;  
          
        IF :NEW.COMENTARIOS IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_TIPO_CABLE', 'ID', v_pk_value, 'COMENTARIOS', NULL, :NEW.COMENTARIOS);  
        END IF;  
  
    ELSIF UPDATING THEN  
  
        IF NVL(:OLD.NOMBRE, 'NULL') != NVL(:NEW.NOMBRE, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_TIPO_CABLE', 'ID', v_pk_value, 'NOMBRE', :OLD.NOMBRE, :NEW.NOMBRE);  
        END IF;  
          
        IF NVL(:OLD.MOSTRAR, 'NULL') != NVL(:NEW.MOSTRAR, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_TIPO_CABLE', 'ID', v_pk_value, 'MOSTRAR', :OLD.MOSTRAR, :NEW.MOSTRAR);  
        END IF;  
          
        IF NVL(:OLD.GRUPO_CABLES, 'NULL') != NVL(:NEW.GRUPO_CABLES, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_TIPO_CABLE', 'ID', v_pk_value, 'GRUPO_CABLES', :OLD.GRUPO_CABLES, :NEW.GRUPO_CABLES);  
        END IF;  
          
        IF NVL(:OLD.COMENTARIOS, 'NULL') != NVL(:NEW.COMENTARIOS, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_TIPO_CABLE', 'ID', v_pk_value, 'COMENTARIOS', :OLD.COMENTARIOS, :NEW.COMENTARIOS);  
        END IF;  
  
    ELSIF DELETING THEN  
  
        IF :OLD.NOMBRE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_TIPO_CABLE', 'ID', v_pk_value, 'NOMBRE', :OLD.NOMBRE, NULL);  
        END IF;  
          
        IF :OLD.MOSTRAR IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_TIPO_CABLE', 'ID', v_pk_value, 'MOSTRAR', :OLD.MOSTRAR, NULL);  
        END IF;  
          
        IF :OLD.GRUPO_CABLES IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_TIPO_CABLE', 'ID', v_pk_value, 'GRUPO_CABLES', :OLD.GRUPO_CABLES, NULL);  
        END IF;  
          
        IF :OLD.COMENTARIOS IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_TIPO_CABLE', 'ID', v_pk_value, 'COMENTARIOS', :OLD.COMENTARIOS, NULL);  
        END IF;  
    END IF;  
  
EXCEPTION  
    WHEN OTHERS THEN  
  
        NULL;  
END TRG_AUDIT_SGT_TIPO_CABLE;
/
ALTER TRIGGER "TRG_AUDIT_SGT_TIPO_CABLE" ENABLE;

  CREATE OR REPLACE EDITIONABLE TRIGGER "TRG_AUDIT_SGT_TIPO_EQUIPOS" 
    AFTER INSERT OR UPDATE OR DELETE ON SGT_TIPO_EQUIPOS  
    FOR EACH ROW  
DECLARE  
    v_audit_id NUMBER;  
    v_pk_value VARCHAR2(100);  
    v_action_type VARCHAR2(10);  
BEGIN  
  
    IF INSERTING THEN  
        v_action_type := 'INSERT';  
        v_pk_value := TO_CHAR(:NEW.ID);  
    ELSIF UPDATING THEN  
        v_action_type := 'UPDATE';  
        v_pk_value := TO_CHAR(:NEW.ID);  
    ELSIF DELETING THEN  
        v_action_type := 'DELETE';  
        v_pk_value := TO_CHAR(:OLD.ID);  
    END IF;  
  
  
    v_audit_id := AUDIT_PKG.START_AUDIT(  
        p_table_name => 'SGT_TIPO_EQUIPOS',  
        p_action => v_action_type  
    );  
  
    IF INSERTING THEN  
  
        IF :NEW.NOMBRE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_TIPO_EQUIPOS', 'ID', v_pk_value, 'NOMBRE', NULL, :NEW.NOMBRE);  
        END IF;  
          
        IF :NEW.DESCRIPCION IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_TIPO_EQUIPOS', 'ID', v_pk_value, 'DESCRIPCION', NULL, :NEW.DESCRIPCION);  
        END IF;  
  
    ELSIF UPDATING THEN  
  
        IF NVL(:OLD.NOMBRE, 'NULL') != NVL(:NEW.NOMBRE, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_TIPO_EQUIPOS', 'ID', v_pk_value, 'NOMBRE', :OLD.NOMBRE, :NEW.NOMBRE);  
        END IF;  
          
        IF NVL(:OLD.DESCRIPCION, 'NULL') != NVL(:NEW.DESCRIPCION, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_TIPO_EQUIPOS', 'ID', v_pk_value, 'DESCRIPCION', :OLD.DESCRIPCION, :NEW.DESCRIPCION);  
        END IF;  
  
    ELSIF DELETING THEN  
  
        IF :OLD.NOMBRE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_TIPO_EQUIPOS', 'ID', v_pk_value, 'NOMBRE', :OLD.NOMBRE, NULL);  
        END IF;  
          
        IF :OLD.DESCRIPCION IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_TIPO_EQUIPOS', 'ID', v_pk_value, 'DESCRIPCION', :OLD.DESCRIPCION, NULL);  
        END IF;  
    END IF;  
  
EXCEPTION  
    WHEN OTHERS THEN  
  
        NULL;   
END TRG_AUDIT_SGT_TIPO_EQUIPOS;
/
ALTER TRIGGER "TRG_AUDIT_SGT_TIPO_EQUIPOS" ENABLE;

  CREATE OR REPLACE EDITIONABLE TRIGGER "TRG_AUDIT_SGT_TIPO_INTERFAZ" 
    AFTER INSERT OR UPDATE OR DELETE ON SGT_TIPO_INTERFAZ  
    FOR EACH ROW  
DECLARE  
    v_audit_id NUMBER;  
    v_pk_value VARCHAR2(100);  
    v_action_type VARCHAR2(10);  
BEGIN  
  
    IF INSERTING THEN  
        v_action_type := 'INSERT';  
        v_pk_value := TO_CHAR(:NEW.ID);  
    ELSIF UPDATING THEN  
        v_action_type := 'UPDATE';  
        v_pk_value := TO_CHAR(:NEW.ID);  
    ELSIF DELETING THEN  
        v_action_type := 'DELETE';  
        v_pk_value := TO_CHAR(:OLD.ID);  
    END IF;  
  
  
    v_audit_id := AUDIT_PKG.START_AUDIT(  
        p_table_name => 'SGT_TIPO_INTERFAZ',  
        p_action => v_action_type  
    );  
  
  
    IF INSERTING THEN  
  
        IF :NEW.NOMBRE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_TIPO_INTERFAZ', 'ID', v_pk_value, 'NOMBRE', NULL, :NEW.NOMBRE);  
        END IF;  
          
        IF :NEW.VALOR IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_TIPO_INTERFAZ', 'ID', v_pk_value, 'VALOR', NULL, :NEW.VALOR);  
        END IF;  
          
        IF :NEW.DESCRIPCION IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_TIPO_INTERFAZ', 'ID', v_pk_value, 'DESCRIPCION', NULL, :NEW.DESCRIPCION);  
        END IF;  
  
    ELSIF UPDATING THEN  
  
        IF NVL(:OLD.NOMBRE, 'NULL') != NVL(:NEW.NOMBRE, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_TIPO_INTERFAZ', 'ID', v_pk_value, 'NOMBRE', :OLD.NOMBRE, :NEW.NOMBRE);  
        END IF;  
          
        IF NVL(:OLD.VALOR, 'NULL') != NVL(:NEW.VALOR, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_TIPO_INTERFAZ', 'ID', v_pk_value, 'VALOR', :OLD.VALOR, :NEW.VALOR);  
        END IF;  
          
        IF NVL(:OLD.DESCRIPCION, 'NULL') != NVL(:NEW.DESCRIPCION, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_TIPO_INTERFAZ', 'ID', v_pk_value, 'DESCRIPCION', :OLD.DESCRIPCION, :NEW.DESCRIPCION);  
        END IF;  
  
    ELSIF DELETING THEN  
  
        IF :OLD.NOMBRE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_TIPO_INTERFAZ', 'ID', v_pk_value, 'NOMBRE', :OLD.NOMBRE, NULL);  
        END IF;  
          
        IF :OLD.VALOR IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_TIPO_INTERFAZ', 'ID', v_pk_value, 'VALOR', :OLD.VALOR, NULL);  
        END IF;  
          
        IF :OLD.DESCRIPCION IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_TIPO_INTERFAZ', 'ID', v_pk_value, 'DESCRIPCION', :OLD.DESCRIPCION, NULL);  
        END IF;  
    END IF;  
  
EXCEPTION  
    WHEN OTHERS THEN  
  
        NULL;   
END TRG_AUDIT_SGT_TIPO_INTERFAZ;
/
ALTER TRIGGER "TRG_AUDIT_SGT_TIPO_INTERFAZ" ENABLE;

  CREATE OR REPLACE EDITIONABLE TRIGGER "TRG_AUDIT_SGT_ZONAS" 
    AFTER INSERT OR UPDATE OR DELETE ON SGT_ZONAS  
    FOR EACH ROW  
DECLARE  
    v_audit_id NUMBER;  
    v_pk_value VARCHAR2(100);  
    v_action_type VARCHAR2(10);  
BEGIN  
    -- Determinar el tipo de acción y el valor de la clave primaria  
    IF INSERTING THEN  
        v_action_type := 'INSERT';  
        v_pk_value := TO_CHAR(:NEW.ID);  
    ELSIF UPDATING THEN  
        v_action_type := 'UPDATE';  
        v_pk_value := TO_CHAR(:NEW.ID);  
    ELSIF DELETING THEN  
        v_action_type := 'DELETE';  
        v_pk_value := TO_CHAR(:OLD.ID);  
    END IF;  
  
    -- Iniciar la auditoría usando el paquete  
    v_audit_id := AUDIT_PKG.START_AUDIT(  
        p_table_name => 'SGT_ZONAS',  
        p_action => v_action_type  
    );  
  
  
    IF INSERTING THEN  
  
        IF :NEW.NOMBRE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ZONAS', 'ID', v_pk_value, 'NOMBRE', NULL, :NEW.NOMBRE);  
        END IF;  
          
        IF :NEW.PARENT_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ZONAS', 'ID', v_pk_value, 'PARENT_ID', NULL, TO_CHAR(:NEW.PARENT_ID));  
        END IF;  
          
        IF :NEW.DESCRIPCION IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ZONAS', 'ID', v_pk_value, 'DESCRIPCION', NULL, :NEW.DESCRIPCION);  
        END IF;  
  
    ELSIF UPDATING THEN  
  
        IF NVL(:OLD.NOMBRE, 'NULL') != NVL(:NEW.NOMBRE, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ZONAS', 'ID', v_pk_value, 'NOMBRE', :OLD.NOMBRE, :NEW.NOMBRE);  
        END IF;  
          
        IF NVL(:OLD.PARENT_ID, -1) != NVL(:NEW.PARENT_ID, -1) THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ZONAS', 'ID', v_pk_value, 'PARENT_ID', TO_CHAR(:OLD.PARENT_ID), TO_CHAR(:NEW.PARENT_ID));  
        END IF;  
          
        IF NVL(:OLD.DESCRIPCION, 'NULL') != NVL(:NEW.DESCRIPCION, 'NULL') THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ZONAS', 'ID', v_pk_value, 'DESCRIPCION', :OLD.DESCRIPCION, :NEW.DESCRIPCION);  
        END IF;  
  
    ELSIF DELETING THEN  
  
        IF :OLD.NOMBRE IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ZONAS', 'ID', v_pk_value, 'NOMBRE', :OLD.NOMBRE, NULL);  
        END IF;  
          
        IF :OLD.PARENT_ID IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ZONAS', 'ID', v_pk_value, 'PARENT_ID', TO_CHAR(:OLD.PARENT_ID), NULL);  
        END IF;  
          
        IF :OLD.DESCRIPCION IS NOT NULL THEN  
            AUDIT_PKG.LOG_CHANGES(v_audit_id, 'SGT_ZONAS', 'ID', v_pk_value, 'DESCRIPCION', :OLD.DESCRIPCION, NULL);  
        END IF;  
    END IF;  
  
EXCEPTION  
    WHEN OTHERS THEN  
         
        NULL;   
END TRG_AUDIT_SGT_ZONAS;
/
ALTER TRIGGER "TRG_AUDIT_SGT_ZONAS" ENABLE; 